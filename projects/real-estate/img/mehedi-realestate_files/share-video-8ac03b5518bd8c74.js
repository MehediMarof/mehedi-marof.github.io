try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5ff0d63d-d525-4a6c-ad9d-a6b4857c6899",e._sentryDebugIdIdentifier="sentry-dbid-5ff0d63d-d525-4a6c-ad9d-a6b4857c6899")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"afc8ef8"};"use strict";(self.webpackChunk_loomhq_web_client=self.webpackChunk_loomhq_web_client||[]).push([["5947"],{42172:function(e,t,a){a.d(t,{A:()=>n});let n={videoTitleContainer:"video-personalization_videoTitleContainer_NMj",variableButtonText:"video-personalization_variableButtonText_hWA"}},42272:function(e,t,a){a.d(t,{l:()=>o});var n=a(68294),r=a(89263);function o(){return r.createElement(n.default,{label:"",testId:"ads-refreshed-icon"})}a(42004)},6390:function(e,t,a){a.d(t,{L:()=>o});var n=a(87976),r=a(89263),o=()=>r.createElement(n.default,{label:"",testId:"ads-refreshed-icon"});a(42004)},19046:function(e,t,a){a.d(t,{r:()=>o});var n=a(50625),r=a(89263);function o(){return r.createElement(n.default,{label:"",testId:"ads-refreshed-icon"})}a(42004)},73524:function(e,t,a){a.d(t,{B:()=>n,i:()=>r});let n={googleChat:"googleChat",smartChip:"smartChip"},r={[n.googleChat]:["https://chat.google.com/"],[n.smartChip]:["https://addons.gsuite.google.com/"]}},24179:function(e,t,a){a.d(t,{En:()=>i,GI:()=>o,Tb:()=>l});var n=a(42943);let r=/({[^}]+}|\s+)/,o=({inputText:e,includeBraces:t=!0})=>{let a=e.split(r),o=new Set(Object.values(n.S).map(e=>"{".concat(e,"}"))),i=a.reduce((e,t,a)=>(o.has(t)&&/{\w+}/.test(t)&&e.push(a),e),[]);if(!t&&i.length>0){let e=a[i[0]].slice(1,-1);for(let t of i)a[t]=e}return{text:a,variableIndexes:i}},i=e=>!!o({inputText:e,includeBraces:!1}).variableIndexes;function l(e){let t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),a=RegExp("(?<![\\w\\d][\"'-])\\b".concat(t,"('s)?\\b(?![\"'-][\\w\\d])"),"gi"),n=RegExp("".concat(t,"[.,!?;:]*"),"gi");return(r,o)=>{let i=o.replace(a,(e,t)=>t?"".concat(r,"'s"):r);return/[.,!?;:]/.test(e)&&(i=i.replace(n,e=>{let a=e.slice(t.length);return r+a})),i}}},83080:function(e,t,a){a.d(t,{y:()=>l}),a(46155);var n=a(40899),r=a(58469);let o={},i=(0,n.J1)`
    mutation UpdateVideoName($id: ID!, $name: String!, $force: Boolean) {
  result: updateVideoName(id: $id, name: $name, force: $force) {
    ... on GenericError {
      message
    }
    ... on InputValidationError {
      message
      failedFields {
        field
        message
      }
    }
    ... on UpdateVideoNamePayload {
      __typename
      video {
        id
        name
      }
    }
  }
}
    `;function l(e){let t={...o,...e};return r.n(i,t)}},98579:function(e,t,a){a.d(t,{x:()=>g});var n=a(89263),r=a(60671),o=a(29665),i=a(65187),l=a(22318);let s={assistant:"ai-title-bar_assistant_xuU",gradient:"ai-title-bar_gradient_QOp",mask:"ai-title-bar_mask_PZI"},d=({onClick:e})=>{let t=(0,i.V)(),a="We are using AI to create a title tailored to your Loom.";return t&&(a+=" This could take a while."),n.createElement(n.Fragment,null,n.createElement(r.m_M,{content:a,placement:"bottomLeft",isInline:!1},n.createElement(r.mcf,{height:"xlarge",marginY:"xsmall",maxWidth:"500px",onClick:e},n.createElement(r.mcf,{width:"100%",height:"100%"},n.createElement(r.mcf,{className:s.assistant,onMouseEnter:()=>l.u4(o.JB7)},n.createElement(r.mcf,{className:s.gradient}),n.createElement(r.mcf,{className:s.mask}),n.createElement(r.mcf,{width:"100%",height:"100%"}))))))},c=({onClick:e})=>n.createElement(n.Fragment,null,n.createElement(r.m_M,{content:"We are using AI to create a title tailored to your Loom.",placement:"bottomLeft"},n.createElement(r.mcf,{height:"xlarge",marginY:"xsmall",maxWidth:"500px",onClick:e},n.createElement(r.mcf,{width:"100%",height:"100%"},n.createElement(r.mcf,{className:s.assistant,onMouseEnter:()=>l.u4(o.JB7)},n.createElement(r.mcf,{className:s.gradient}),n.createElement(r.mcf,{className:s.mask}),n.createElement(r.mcf,{width:"100%",height:"100%"}))))));var m=a(59028),u=a(16369);let p=({autoTitle:e,setIsCompleted:t})=>n.createElement(n.Fragment,null,n.createElement(u.$,null,n.createElement(m.d,{sequence:[e,()=>{t(!0)}],wrapper:"div",cursor:!1,speed:60}))),g=({setIsCompleted:e,autoTitle:t,isAutoTitleGenerated:a,onClick:r,isScreenshotTitle:o})=>a?n.createElement(p,{autoTitle:t,setIsCompleted:e}):o?n.createElement(c,{onClick:r}):n.createElement(d,{onClick:r})},78772:function(e,t,a){a.d(t,{s:()=>o});var n=a(89263),r=a(76286);let o=()=>{let e=(0,r.C)(),t=(0,n.useCallback)(t=>e.sendScreenEvent({...t}),[e]),a=(0,n.useCallback)(t=>e.sendUIEvent({...t}),[e]),o=(0,n.useCallback)(t=>e.sendTrackEvent({...t}),[e]),i=(0,n.useCallback)(t=>e.sendOperationalEvent({...t}),[e]);return{sendScreenEvent:t,sendUiEvent:a,sendTrackEvent:o,sendOperationalEvent:i}}},13253:function(e,t,a){a.d(t,{i:()=>d});var n=a(89263),r=a(70811),o=a(53659),i=a(98482),l=a(29665),s=a(84597);let d=({children:e,pageName:t,props:a})=>{let d=(0,i.useCurrentUserSelector)(e=>e.id,void 0),c=(0,i.useIsCurrentUserLoggedIn)(),m=(0,o.getAtlassianAnalyticsClient)(),u={name:t,dwellTime:0,FinalDwellEvent:!1,...a,userId:d?d.toString():void 0};return c||(u.anonymousId=m.getAnonymousId()),(0,s.J)(()=>{let e={source:t,actionSubject:l.c4_},a=new r.A(e=>{u.dwellTime=e.attributes.dwellTime,u.FinalDwellEvent=e.attributes.finalDwellEvent;let t={source:l.c4_,action:"dwelled",actionSubject:l.c4_,attributes:{application:"loom",...u}};(async()=>await m.sendTrackEvent(t))()},e);return a.start(),()=>{a.stop()}}),n.createElement(n.Fragment,null,e)}},29417:function(e,t,a){a.d(t,{t:()=>r});var n=a(29305);let r=(0,n.A)(e=>({isDownloading:!1,downloadingPercentage:0,setDownloading:()=>e(()=>({isDownloading:!0})),setDownloadingPercentage:t=>e(()=>({downloadingPercentage:t})),resetDownloading:()=>e(()=>({isDownloading:!1,downloadingPercentage:0}))}))},41912:function(e,t,a){a.d(t,{o:()=>r});var n=a(89263);let r=({size:e,blur:t,position:a,parallax:r,mousePosition:o})=>n.createElement("div",{className:"loom-ai-bubble_bubble_PMe",style:{filter:t?`blur(${t}px)`:"none",height:`${e}rem`,width:`${e}rem`,left:`calc(50% - ${e/2}rem + ${a[0]/2}%)`,top:`calc(50% - ${e/2}rem + ${a[1]/2}%)`,transform:r&&o?`translate(${o.x*r/100}px, ${o.y*r/100}px)`:"none"}})},99481:function(e,t,a){a.d(t,{r:()=>s,H:()=>l});var n=a(89263),r=a(60671);let o={loomBadgeWrapper:"loom-badge_loomBadgeWrapper_i16",loomBadgeText:"loom-badge_loomBadgeText_PdB",loomBadgeLogo:"loom-badge_loomBadgeLogo_ZYZ"},i=()=>n.createElement(n.Fragment,null,n.createElement("span",{className:o.loomBadgeText},"Made with"),n.createElement(r.guG,{className:o.loomBadgeLogo,maxWidth:"4.25em",symbolColor:"primary",wordmarkColor:"body"})),l=()=>n.createElement("div",{className:o.loomBadgeWrapper},n.createElement(i,null)),s=({href:e,title:t})=>n.createElement("a",{className:o.loomBadgeWrapper,href:e,"aria-label":`Go to ${t}`},n.createElement(i,null))},21217:function(e,t,a){a.d(t,{v:()=>i});var n=a(89263),r=a(9074);let o=(0,r.A)(()=>a.e("8602").then(a.bind(a,39697)).then(e=>({default:e.MobileDownloadBanner}))),i=e=>n.createElement(n.Suspense,{fallback:null},n.createElement(o,{...e}))},16353:function(e,t,a){a.d(t,{K:()=>r});var n=a(29305);let r=(0,n.A)(e=>({roleMandatoryModalHasBeenClosed:!1,setRoleMandatoryModalHasBeenClosed:t=>e({roleMandatoryModalHasBeenClosed:t})}))},76781:function(e,t,a){a.d(t,{t:()=>s});var n=a(32347),r=a(61228),o=a(26792),i=a(39328);function l(e){return e.replace(/%22/g,"").replace(/\\"/g,"").replace(/"/g,"")}function s(){let e=(0,o.up)(n._x);if(e)return l(e);let t=(0,r.R)(n._x);if(t)try{if("string"!=typeof t)throw Error("Retrieved cookie is not a string");return l(t)}catch(e){i.warning(e,{anonIdinCookies:t})}return""}},4554:function(e,t,a){a.d(t,{R:()=>n});let n="[Video Title]"},53698:function(e,t,a){a.d(t,{E:()=>E});var n=a(32566),r=a(49259),o=a(40002),i=a(83080),l=a(59921),s=a(79081),d=a(29665),c=a(22318),m=a(39328),u=a(80254),p=a(4554),g=a(16943);let h="Oops! Error updating video title",E=()=>{let{showErrorBar:e}=(0,o.Nl)(),{video:{id:t}}=(0,l.McE)(),a=(0,g.a)(),E=(r,o,i)=>{m.error(o,{message:`${p.R} error in useSaveVideoTitle`},{feature:n.Xj.VideoPackaging}),e({message:r,severity:s.M.ERROR}),m.info(`${p.R} Resetting video context title to previous title due to error`,{videoId:t}),a(i)},f=({data:{result:e},previousTitle:a})=>{if(e?.__typename==="UpdateVideoNamePayload")c.u4(d.S5I,{...(0,u.x)(d.S5I,r.T.video(t,"video_id")),oldLength:a.length,newLength:e.video?.name.length,source:"video-share-page"}),m.info(`${p.R} Video title updated successfully from UpdateVideoNameMutation`,{videoId:t});else{let t=h;e&&"message"in e&&(t=e?.message);let n=`${e?.__typename}: ${t}`,r=Error(n);E(t,r,a)}},[v]=(0,i.y)();return({previousTitle:e,newTitle:n})=>{m.info(`${p.R} Optimistically updating video context title to new title`,{videoId:t}),a(n),v({variables:{force:!0,id:t,name:n},onError:t=>{E(h,t,e)},onCompleted:t=>f({data:t,previousTitle:e}),optimisticResponse:{__typename:"Mutation",result:{__typename:"UpdateVideoNamePayload",video:{__typename:"RegularUserVideo",id:t,name:n}}}})}}},16943:function(e,t,a){a.d(t,{a:()=>m});var n=a(89263),r=a(24179),o=a(59921),i=a(42347),l=a(82820),s=a(34356);let d=(e,t)=>{let a=new URL(window.location.href),n=a.pathname.split("/"),r=n.pop(),o=e?s.EG(e):null,i=o?`${o}-${t}`:t;r!==i&&(n.push(i),a.pathname=n.join("/"),history.replaceState(null,"",a.toString()))},{GI:c}=r,m=()=>{let{setVideo:e,video:{id:t}}=(0,o.McE)(),a=(0,i.M)();return(0,n.useCallback)(n=>{let r=0!==c({inputText:n}).variableIndexes.length;e({title:n,isParentOfPersonalizedCopies:r}),(0,l.Sw)(n),a&&d(n,t)},[a,e,t])}},80044:function(e,t,a){a.d(t,{X:()=>l}),a(46155);var n=a(40899),r=a(58469);let o={},i=(0,n.J1)`
    mutation RemoveVideoFromWatchLaterList($videoId: ID!) {
  removeVideoFromWatchLaterList(videoId: $videoId) {
    ... on RemoveVideoFromWatchLaterListPayload {
      success
    }
    ... on UserNotAuthorizedError {
      message
    }
    ... on GenericError {
      message
    }
    __typename
  }
}
    `;function l(e){let t={...o,...e};return r.n(i,t)}},19939:function(e,t,a){a.d(t,{$:()=>i});var n=a(89263),r=a(9074);let o=(0,r.A)(()=>a.e("6712").then(a.bind(a,14075)).then(e=>({default:e.WebPermissionsBanner}))),i=e=>n.createElement(n.Suspense,{fallback:null},n.createElement(o,{...e}))},17729:function(e,t,a){a.d(t,{S:()=>i});var n=a(89263),r=a(60671),o=a(16353);let i=()=>{let{setRoleMandatoryModalHasBeenClosed:e,roleMandatoryModalHasBeenClosed:t}=(0,o.K)();return n.createElement(r.y8,{isOpen:t,onCloseClick:()=>e(!1)},"Your role has been updated!")}},36211:function(e,t,a){a.d(t,{A:()=>l});var n=a(58478),r=a.n(n),o=a(89263),i=a(60671);let l=({size:e=4.5,backgroundColor:t="",removeBorder:a,children:n,padding:l})=>o.createElement(i.mcf,{className:r()("icon-circle_iconCircleContainer_QTY",{"icon-circle_withBorder_RXD":!a}),backgroundColor:t,radius:"100",width:e,height:e,padding:l},n)},90725:function(e,t,a){a.d(t,{Q:()=>i});var n=a(89263),r=a(60671),o=a(27039);let i=({children:e,tooltipText:t,tooltipDirection:a,inActivitySidebar:i=!1})=>n.createElement("div",{className:"businessHighlightTooltipWrapper"},n.createElement(r.m_M,{placement:a,tabIndex:-1,triggerOffset:8,maxWidth:i?30:void 0,isInline:!1,keepOpen:!0,content:n.createElement(n.Fragment,null,n.createElement(r.zAb,{gap:"small"},n.createElement(r.Int,{color:"upgradeHover",size:2,icon:n.createElement(o.C,null)}),n.createElement(r.EYj,{color:"upgradeHover",size:"body-sm",fontWeight:"bold"},"Available with your trial")),n.createElement(r.hKd,{bottom:1}),n.createElement(r.EYj,{size:"body-sm"},t))},e))},48761:function(e,t,a){a.d(t,{p:()=>p});var n=a(89263),r=a(60671),o=a(27039),i=a(69358),l=a(36211),s=a(90725),d=a(39996),c=a(96821),m=a(41339),u=a(27986);let p=({scope:e,placement:t="bottomCenter",title:a,feature:p=u.o1.DEFAULT,highlightText:g,inActivitySidebar:h=!1})=>{let E=(0,c.z)();return(0,m.s1)(e)?E?n.createElement(s.Q,{tooltipDirection:t,tooltipText:g,inActivitySidebar:h},n.createElement(r.zAb,{gap:"small"},a,n.createElement(l.A,{size:"var(--lns-space-large)",backgroundColor:"upgrade"},n.createElement(r.Int,{icon:n.createElement(o.C,null),size:2,color:"body"})))):n.createElement(n.Fragment,null,a):n.createElement(d.Q,{placement:t,feature:p,inActivitySidebar:h},n.createElement(r.zAb,{gap:"small"},n.createElement(r.EYj,{color:"disabledContent",size:h?"small":void 0,fontWeight:h?"bold":void 0},a),n.createElement(r.Int,{icon:n.createElement(i._,null),size:2,color:"disabledContent"})))}},24673:function(e,t,a){a.d(t,{O:()=>o});var n=a(89263),r=a(60671);let o=({title:e,content:t})=>n.createElement(r.m_M,{placement:"rightCenter",content:t},n.createElement(r.EYj,{color:"disabledContent"},e))},78081:function(e,t,a){a.d(t,{$3:()=>d,Cq:()=>b,Dn:()=>v,Dy:()=>r,Lz:()=>p,Pi:()=>l,R_:()=>h,S$:()=>T,SJ:()=>m,Zg:()=>g,bZ:()=>o,dC:()=>u,hs:()=>w,i2:()=>n,mj:()=>s,oV:()=>E,tn:()=>i,wx:()=>c,xf:()=>f,zv:()=>y});let n="Move...",r="Manage folder",o="Make public",i="Make private",l="Rename",s="Duplicate",d="Archive",c="Unarchive",m="Delete",u="Download",p="Download video",g="Download captions",h="Copy link",E="Share",f="Dive (Admin)",v="Search",w="Move folder into Space",b="Contact Sales",y="Copy embed code",T="Admin management"},3882:function(e,t,a){a.d(t,{N:()=>l}),a(46155);var n=a(40899),r=a(58469);let o={},i=(0,n.J1)`
    mutation ArchiveVideos($videoIds: [ID!]!, $isArchived: Boolean!) {
  result: archiveVideos(videoIds: $videoIds, isArchived: $isArchived) {
    ... on ArchiveVideosPayload {
      videos {
        id
      }
    }
  }
}
    `;function l(e){let t={...o,...e};return r.n(i,t)}},11748:function(e,t,a){a.d(t,{D:()=>l}),a(46155);var n=a(40899),r=a(58469);let o={},i=(0,n.J1)`
    mutation DuplicateVideo($videoId: ID!, $newName: String!, $spaceId: ID, $password: String) {
  duplicateVideo(
    videoId: $videoId
    newName: $newName
    spaceId: $spaceId
    password: $password
  ) {
    __typename
    ... on GenericError {
      __typename
      message
    }
    ... on DuplicateVideoPayload {
      __typename
      newVideo {
        __typename
        id
        name
      }
    }
  }
}
    `;function l(e){let t={...o,...e};return r.n(i,t)}},55400:function(e,t,a){a.d(t,{H:()=>i});var n=a(1946),r=a(18787),o=a(28353);function i(){let[e,t]=(0,r.lo)({flag:n.Rv.EXP_MWEB_COMMENTING_V2,controlType:n.mD.STATSIG_EXPERIMENT,activationValues:["variant-1"],returnAssignmentName:!0,eligibilityPreCheckFunction:()=>o.Fr?{pass:!0}:{pass:!1,failReason:"Not eligible for the MWeb Commenting V2 experiment"}});return{isExpMWebCommentingV2:e,expMWebCommentingV2Variant:t}}},37109:function(e,t,a){a.d(t,{U:()=>i});var n=a(1946),r=a(98482),o=a(18787);function i(){let e=!!(0,r.useCurrentUserSelector)(e=>e.persona?.persona_v1?.use_case_plan_persona,null);return(0,o.lo)({flag:n.Rv.EXPERIMENT_ROLE_QUESTION_MANDATORY_V2,controlType:n.mD.STATSIG_EXPERIMENT,activationValues:["variant-1"],eligibilityPreCheckFunction:()=>e?{pass:!1,failReason:"Ineligible: user has a role defined already."}:{pass:!0}})}},42347:function(e,t,a){a.d(t,{M:()=>i});var n=a(35285),r=a(18787),o=a(51382);function i(){return(0,r.lo)({flag:n.F,activationValues:n.Fd})&&!(0,o.Qp)()}},99633:function(e,t,a){let n;a.d(t,{Qn:()=>T,km:()=>I,Ep:()=>y});var r=a(32566),o=a(29417),i=a(93788),l=a(78845),s=a(29665),d=a(22318),c=a(82813),m=a.n(c),u=a(39328),p=Object.defineProperty,g=(e,t,a)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,h=(e,t,a)=>g(e,"symbol"!=typeof t?t+"":t,a);let E=e=>{e.preventDefault();let t="Loom is still downloading. Are you sure you want to leave?";return e.returnValue=t,t};class f{constructor(e,t,a){h(this,"onProgressCallback"),h(this,"onCompletedCallback"),h(this,"onErrorCallback"),h(this,"time"),h(this,"downloadData"),h(this,"fileName"),h(this,"timerInterval"),h(this,"request"),h(this,"setTime",()=>{this.time=this.time||0,this.time++}),h(this,"onProgress",e=>{let t=100*e.loaded/e.total,a=Math.floor(t);this.onProgressCallback(a)}),h(this,"onLoad",e=>{let t=e.target;if(t&&t instanceof XMLHttpRequest){let e=t.getResponseHeader("Content-Type"),a=new Blob([t.response],{type:e??void 0});if(200!==t.status){this.onError();return}this.downloadData=a,clearInterval(this.timerInterval),window.removeEventListener("beforeunload",E),this.onCompletedCallback()}}),h(this,"onError",()=>{this.cleanup(),this.onErrorCallback()}),h(this,"fetch",(e="",t=null)=>{this.fileName=t||e.split("/").pop(),this.request&&this.request.abort(),this.request=new XMLHttpRequest,this.request.addEventListener("progress",this.onProgress),this.request.addEventListener("load",this.onLoad),this.request.addEventListener("error",this.onError),window.addEventListener("beforeunload",E),this.request.open("GET",e),this.request.responseType="blob",this.request.send(),clearInterval(this.timerInterval),this.time=0,this.timerInterval=setInterval(this.setTime,1e3)}),h(this,"abort",()=>{this.request&&this.request.abort(),this.cleanup()}),h(this,"cleanup",()=>{this.request=void 0,this.fileName=void 0,this.downloadData=void 0,clearInterval(this.timerInterval),window.removeEventListener("beforeunload",E)}),h(this,"save",()=>m()(this.downloadData,this.fileName)),this.onProgressCallback=e,this.onCompletedCallback=t,this.onErrorCallback=a,this.time=0}}var v=a(37977),w=a(48534);let b=e=>{if(!e)return null;try{return new URL(e).searchParams.get("Policy")}catch(e){return u.error(e,{message:"Failed to get policy from Url"},{team:r.u.Mint}),null}},y=(e,t,a)=>{let{setDownloading:r,setDownloadingPercentage:i,resetDownloading:l}=o.t.getState();(function(e,t,{onProgress:a,onCompleted:r,onError:o}){(n=new f(a,r,o)).fetch(e,t)})(e,t,{onProgress:e=>{i(e)},onCompleted:()=>{l(),(0,w.E)(a.video_id),d.u4(s.jyt,a),n&&(u.info("Saving download",{}),n.save())},onError:()=>{l()}}),r()};function T(){let{isDownloading:e}=(0,o.t)(),[t]=(0,i.$6)(),{setUrl:a}=(0,l.G)();return n=>{let{url:r,name:o,opts:i,password:l}=n;if(e)return;let s=b(r);s&&(0,v.O)(s)?t({variables:{videoId:i.video_id},fetchPolicy:"network-only"}).then(e=>{if(e.error)return Promise.reject(e.error.message);let t=e.data?.getVideoTranscodedUrl;if(!t)return Promise.reject("Error refreshing credentials for download url: no data found");if("VideoSource"===t.__typename&&t.url)a(t.url),y(t.url,o,i);else{let e=`Error refreshing credentials for download url: ${t.__typename}`;return Promise.reject(e)}}).catch(e=>{throw u.warning(e,{video_id:i.video_id}),Error(e)}):y(r,o,i)}}function I(){let{resetDownloading:e}=(0,o.t)();return()=>{e(),n&&(u.info("Abort download",{}),n.abort())}}},76878:function(e,t,a){a.d(t,{u:()=>s});var n=a(89263),r=a(8751),o=a(61493),i=a(52700),l=a(26792);let s=(e,t,a)=>{let{openModal:s}=(0,o.U)(),d=(0,l.up)(i.Z8),c=null===d||"false"===d;(0,n.useEffect)(()=>{e&&t&&!a&&c&&s({modalType:r.N3})},[e,s,c,a,t])}},72791:function(e,t,a){a.d(t,{K:()=>m});var n=a(89263),r=a(32566),o=a(23714),i=a(39328);a(46155);var l=a(40899),s=a(96101);let d={},c=(0,l.J1)`
    query GetVideoExpirationDate($videoId: ID!, $password: String) {
  getVideo(id: $videoId, password: $password) {
    __typename
    ... on RegularUserVideo {
      id
      expirationDate
    }
  }
}
    `,m=({videoId:e})=>{let{password:t}=(0,o.l)(),{data:a,loading:l,error:m}=function(e){let t={...d,...e};return s.IT(c,t)}({variables:{videoId:e,password:t}});if((0,n.useEffect)(()=>{m&&i.error(m,{error:"Failed to get video expiration date",videoId:e},{feature:r.Xj.WorkspaceLinkExpiration})},[m,e]),l)return{loading:l};if(!a?.getVideo||"RegularUserVideo"!==a.getVideo.__typename)return{loading:!1,data:void 0};let u=a.getVideo.expirationDate??"";return!u||u>new Date().toISOString()?{data:{hasVideoExpired:!1,expirationDate:u},loading:!1}:{data:{hasVideoExpired:!0,expirationDate:u},loading:!1}}},18246:function(e,t,a){a.d(t,{V9:()=>d,dW:()=>s}),a(46155);var n=a(40899),r=a(96101),o=a(2831);let i={},l=(0,n.J1)`
    query GetVideo($id: ID!, $password: String = null) {
  getVideo(id: $id, password: $password) {
    ... on RegularUserVideo {
      owner {
        id
        first_name
        last_name
      }
      organization {
        id
        name
      }
      createdAt
      isCommunityLoom
      name
      id
    }
  }
}
    `;function s(e){let t={...i,...e};return r.IT(l,t)}function d(e){let t={...i,...e};return o._(l,t)}},70106:function(e,t,a){a.d(t,{t:()=>l});var n=a(44472),r=a(1946),o=a(18787),i=a(41339);let l=()=>{let e=(0,i.s1)(n.Oc),t=(0,o.lo)({flag:r.Y0.LOOM_CAM_LOCATION_PICKER,controlType:r.mD.STATSIG_FEATURE_GATE,activationValues:[!0],eligibilityPreCheckFunction:()=>e?{pass:!0}:{pass:!1,failReason:"ineligible"}}),a=(0,o.lo)({flag:r.Rv.CAM_SPLIT_WITH_AUTO_ZOOM_AND_LOCATION_PICKER,controlType:r.mD.STATSIG_EXPERIMENT,activationValues:[r.ZD.VARIANT,r.ZD.VARIANT_EXCLUDED],eligibilityPreCheckFunction:()=>e?{pass:!0}:{pass:!1,failReason:"ineligible"}});return t||a}},37835:function(e,t,a){a.d(t,{I:()=>s,U:()=>l});var n=a(89263);let r="asgModalDesktopSession",o="hideAsgDesktopModal",i="asgDesktopVisitCount";function l({meetsAsgDesktopPrecheck:e}){let[t,a]=(0,n.useState)(null),l=localStorage.getItem(i),s=!!sessionStorage.getItem(r);return(0,n.useEffect)(()=>{window.sessionStorage&&(s||sessionStorage.setItem(r,JSON.stringify(!0)))},[s]),(0,n.useEffect)(()=>{if(!e)return a(!1);if(l){s||function(){let e=Number(localStorage.getItem(i))+1;localStorage.setItem(i,JSON.stringify(e))}();let e=window.localStorage?!!localStorage.getItem(o):void 0;1!==Number(l)||e||a(!0)}l||localStorage.setItem(i,JSON.stringify(0))},[s,e,l]),t}function s(){localStorage.setItem(o,JSON.stringify(!0))}},7543:function(e,t,a){a.d(t,{X:()=>r});var n,r=((n=r||{}).Comment="comment",n.Emoji="emoji",n)},47952:function(e,t,a){a.d(t,{u:()=>l,I:()=>s});var n=a(89263);let r="asgModalMobileSession",o="hideAsgMobileModal",i="asgMobileVisitCount";function l({meetsAsgMobilePrecheck:e}){let[t,a]=(0,n.useState)(!1),l=localStorage.getItem(i),s=!!sessionStorage.getItem(r);return(0,n.useEffect)(()=>{window.sessionStorage&&(s||sessionStorage.setItem(r,JSON.stringify(!0)))},[s]),(0,n.useEffect)(()=>{if(!e)return a(!1);if(l){s||function(){let e=Number(localStorage.getItem(i))+1;localStorage.setItem(i,JSON.stringify(e))}();let e=window.localStorage?!!localStorage.getItem(o):void 0;1!==Number(l)||e||a(!0)}l||localStorage.setItem(i,JSON.stringify(0))},[e,s,l]),t}function s(){localStorage.setItem(o,JSON.stringify(!0))}},35679:function(e,t,a){a.d(t,{j:()=>r});var n=a(29305);let r=(0,n.A)(e=>({isOpen:!1,replyId:null,comment:null,setIsOpen:t=>e({isOpen:t}),setReplyId:t=>e({replyId:t}),setComment:t=>e({comment:t})}))},16369:function(e,t,a){a.d(t,{$:()=>o});var n=a(89263),r=a(60671);let o=({children:e,onClick:t})=>n.createElement("div",{className:"common_textContainer_vzJ",onClick:t},n.createElement(r.EYj,{size:"heading-sm",fontWeight:"bold",hasEllipsis:!0,ellipsisLines:1},e))},18652:function(e,t,a){a.d(t,{$:()=>o});var n=a(89263),r=a(60671);let o=(0,n.forwardRef)((e,t)=>n.createElement(r.ksK,{size:"large",type:"text",ref:t,...e}));o.displayName="TextInputBox"},60356:function(e,t,a){a.d(t,{C:()=>r});var n=a(33438);function r(e){return e.length<n.Ri}},38412:function(e,t,a){var n,r,o=a(89263),i=a(21271),l=a(10993),s=a(15037),d=a(32566),c=a(278),m=a(34356),u=a(47489),p=a(36638),g=a(37840),h=a(98228),E=a(46155),f=a(53688),v=a(73524),w=a(3823),b=a(1946),y=a(49259),T=a(53659),I=a(29566),C=a(41867),_=a(98482),S=a(32288),k=a(13253),A=a(40002),P=a(8751),L=a(66706),R=a(97685),D=a(20149),x=a(23714),N=a(59921),M=a(60671),V=a(61493);let O=()=>{let{openModal:e}=(0,V.U)();return o.createElement(M.mcf,{width:"100%",backgroundColor:"primary",padding:"small"},o.createElement(M.zAb,{gap:4,justifyContent:"center"},o.createElement(M.EYj,{alignment:"center",color:"white",fontWeight:"bold"},"Sign up to save this video as your own. You can only do this for the next 24hrs."),o.createElement(M.mcf,{backgroundColor:"white",radius:"medium"},o.createElement(M.$nd,{size:"small",onClick:()=>{e({modalType:P.bY.ANON_CREATOR_SIGNUP_MODAL})}},o.createElement(M.EYj,{fontWeight:"bold",color:"primary"},"Get Loom for Free")))))},$=o.createContext(null);$.displayName="HighlightCommentContext";var F=a(8914),U=a(79081),B=a(29665),z=a(58227),W=a(84306),H=a(18787),q=a(8746),Y=a(83219);a(90614);var G=a(49272),j=a(76361),J=a(58909),X=a(98918),K=a(76781),Z=a(69772),Q=a(28353),ee=a(71473);function et({onDismiss:e,onLoginClick:t}){return(0,o.useEffect)(()=>{Q.Fr||(0,Z.B)(B.K5l,{loomAnonymousId:(0,K.t)()})},[]),Q.Fr?null:o.createElement(M.mcf,{backgroundColor:"primary",paddingX:"large",paddingY:"20px",width:"100%","data-testid":"post-migration-login-banner"},o.createElement(M.zAb,{columns:"1fr auto 1fr",alignItems:"center"},o.createElement(M.mcf,null),o.createElement(M.B19,{gap:"xsmall",alignItems:"center"},o.createElement(M.EYj,{color:"white",size:"body-md","data-testid":"post-migration-login-banner-message"},"Psst, you're logged out and watching this video as a guest. Sign in to jump back into Loom!"),o.createElement(M.N_E,{href:(()=>{let e=window.location.href,t=new URL("/api/auth/atlassian",W.J4);return t.searchParams.set("redirect_after",e),t.toString()})(),onClick:()=>{t()},variant:"neutral",style:{color:"white",textDecorationColor:"white"},"data-testid":"post-migration-login-banner-login-link"},o.createElement(M.EYj,{color:"white",size:"body-md"},"Log back in"))),o.createElement(M.zAb,{justifyContent:"end"},o.createElement(M.K0,{altText:"Dismiss",icon:o.createElement(ee.h,null),onClick:e,iconColor:"white","data-testid":"post-migration-login-banner-dismiss"}))))}let ea=a.p+"img/migration/post-migration-login-banner-57d5dcf4fb1ee485.svg";function en({onDismiss:e,onLoginClick:t}){let[a,n]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{n(!0)},[]),(0,o.useEffect)(()=>{a&&!Q.Fr&&(0,Z.B)(B.rP6,{loomAnonymousId:(0,K.t)()})},[a]),Q.Fr?null:o.createElement(M.mcf,{position:"relative",zIndex:1e3},o.createElement(M.aFV,{isOpen:a,onCloseClick:e,maxWidth:"496px"},o.createElement(M.mcf,null,o.createElement(M.zAb,{columns:"1fr",gap:"medium"},o.createElement(M.zAb,{justifyContent:"center"},o.createElement("img",{src:ea,alt:"Loom and Atlassian logos surrounded by decorative elements","data-testid":"post-migration-login-modal-image",style:{width:"100%",maxWidth:"378px",height:"auto",display:"block"}})),o.createElement(M.EYj,{size:"heading-sm",fontWeight:"bold",color:"body","data-testid":"post-migration-login-modal-heading"},"Psst, you're logged out and watching this video as a guest."),o.createElement(M.EYj,{color:"bodyDimmed",size:"body-md","data-testid":"post-migration-login-modal-description"},"We logged you out when we integrated your profile with Atlassian. Sign back in using your Loom credentials, so your colleague knows you watched this video."),o.createElement(M.$nd,{variant:"primary",size:"large",onClick:()=>{let e=window.location.href,a=new URL("/api/auth/atlassian",W.J4);a.searchParams.set("redirect_after",e),window.location.href=a.toString(),t()},"data-testid":"post-migration-login-modal-login-button"},"Log back into Loom")))))}var er=a(40899),eo=a(96101);let ei={},el=(0,er.J1)`
    query GetShowPostMigrationLoginBanner($anonId: ID!) {
  getShowPostMigrationLoginBanner(anonId: $anonId) {
    __typename
    ... on GetShowPostMigrationLoginBannerPayload {
      showModal
      showBanner
    }
    ... on Error {
      message
    }
  }
}
    `;var es=a(58469);let ed={},ec=(0,er.J1)`
    mutation UpdateShowPostMigrationLoginBanner($input: UpdateShowPostMigrationLoginBannerInput!) {
  updateShowPostMigrationLoginBanner(input: $input) {
    __typename
    ... on UpdateShowPostMigrationLoginBannerPayload {
      success
    }
    ... on Error {
      message
    }
  }
}
    `;function em(){let{showModal:e,showBanner:t,loading:a,error:n,updateBannerStatus:r}=function(){let e=(0,_.useIsCurrentUserLoggedIn)(),t=(0,K.t)(),{data:a,loading:n,error:r,refetch:i}=function(e){let t={...ei,...e};return eo.IT(el,t)}({skip:e||!t,variables:{anonId:t},errorPolicy:"all"}),[l]=function(e){let t={...ed};return es.n(ec,t)}(),s=(0,o.useCallback)(async e=>{if(t)try{await l({variables:{input:{anonId:t,action:e}}}),e!==E.fWH.Viewed&&await i()}catch{}},[t,l,i]),d=!!(!e&&t&&a?.getShowPostMigrationLoginBanner?.__typename==="GetShowPostMigrationLoginBannerPayload"&&!0===a.getShowPostMigrationLoginBanner.showModal),c=!!(!e&&t&&!d&&a?.getShowPostMigrationLoginBanner?.__typename==="GetShowPostMigrationLoginBannerPayload"&&!0===a.getShowPostMigrationLoginBanner.showBanner);return{showModal:d,showBanner:c,loading:n,error:r,updateBannerStatus:s,refetch:()=>{!e&&t&&i()}}}();(0,o.useEffect)(()=>{Q.Fr||a||n||!e&&!t||r(E.fWH.Viewed).catch(()=>{})},[a,n,e,t,r]);let i=(0,o.useCallback)(async()=>{(0,Z.B)(B.ACA,{loomAnonymousId:(0,K.t)()}),await r(E.fWH.ModalDismissed)},[r]),l=(0,o.useCallback)(async()=>{(0,Z.B)(B.$AB,{loomAnonymousId:(0,K.t)()}),await r(E.fWH.BannerDismissed)},[r]),s=(0,o.useCallback)(async()=>{(0,Z.B)(B.oX$,{loomAnonymousId:(0,K.t)()}),await r(E.fWH.LoginCtaClicked)},[r]),d=(0,o.useCallback)(async()=>{(0,Z.B)(B.VYl,{loomAnonymousId:(0,K.t)()}),await r(E.fWH.LoginCtaClicked)},[r]);return Q.Fr||a||n?null:e?o.createElement(en,{onDismiss:i,onLoginClick:d}):t?o.createElement(et,{onDismiss:l,onLoginClick:s}):null}var eu=a(58478),ep=a.n(eu);let eg=["team","enterprise"];var eh=a(26129),eE=a(44472),ef=a(78772),ev=a(93089),ew=a(42775),eb=a(26598),ey=a(65014),eT=a(66441),eI=a(88890),eC=a(9074);let e_=(0,eC.A)(()=>a.e("8689").then(a.bind(a,44872)).then(e=>({default:e.OwnerInfo}))),eS=()=>o.createElement(o.Suspense,{fallback:null},o.createElement(e_,null));var ek=a(92477),eA=a(31552),eP=a(52700),eL=a(23139),eR=a(42347),eD=a(61603),ex=a(78602),eN=a(72791),eM=a(34121),eV=a(22318),eO=a(51382),e$=a(82820);let eF=()=>o.createElement(o.Fragment,null,o.createElement(M.mcf,{position:"absolute",top:0,left:0,right:0,bottom:"-2px",backgroundColor:"rgba(75, 66, 173, 0.8)",zIndex:2}),o.createElement("div",{className:"copy-link-button_animatedArrow_gFU"},o.createElement("svg",{width:114,height:119,viewBox:"0 0 114 119",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{className:"copy-link-button_styledArrow_hX_",d:"M81.1026 17.1876C82.9771 11.8374 87.1421 1.30131 88.8057 1.95893C90.4692 2.61656 97.4592 12.9136 100.746 17.98",stroke:"white",strokeWidth:"3",strokeMiterlimit:"1.5"}),o.createElement("path",{className:"copy-link-button_styledLine_yYG",d:"M2 92.1658C21.3572 99.2581 60.9676 104.849 64.5522 70.4755C65.2016 64.2483 58.6091 52.6449 51.6939 57.137C45.3954 61.2285 52.8272 72.55 68.0603 69.6427C89.4236 65.5654 100.769 34.5125 88.7188 4.16391",stroke:"white",strokeWidth:"3"}))));function eU({videoId:e,videoName:t,analyticsSource:a,currentSeconds:n=0,showTutorial:r=!1,variant:i="neutral",isTextButton:l,hasTransparentBackground:s=!1}){let[d,c]=(0,o.useState)(!1),m=(0,eR.M)(),u=(0,eD.Te)(),p=(0,eM.H)(),{completeChecklistItem:g}=(0,eL.s)(E.eMe.ShareVideo),h=function(e,{currentSeconds:t,nameForSlug:a}){if((0,e$.hd)(window.location.pathname)){let[,e]=location.pathname.match(/\/a\/([a-z0-9]{32})*/)??[];if(e)return(0,e$.R8)(e,t)}return(0,e$.wI)(e,{currentSeconds:t,nameForSlug:a})}(e,{currentSeconds:n,nameForSlug:m?t:null}),f=(0,o.useRef)(null),v=function({videoId:e,isCopied:t}){let{data:a}=(0,eN.K)({videoId:e});return t?"Link copied!":a?.expirationDate?`Copy a link that expires on ${(0,ex.A)(new Date(a.expirationDate),"MMM do")}`:"Copy link"}({videoId:e,isCopied:d}),[w,b]=(0,ek.A)(eP.WV);function y(){(0,eO.F8)({videoUrl:f?.current?.value}),c(!0),setTimeout(()=>{c(!1)},2e3),r&&b(!1),(0,eV.u4)(B.VHe,{video_id:e,source:a,seconds:n>=1?n:void 0}),g()}let T=o.createElement("input",{className:"none",ref:f,readOnly:!0,value:h});return o.createElement(o.Fragment,null,l?o.createElement(M.mcf,{backgroundColor:s?"transparent":"background",position:"relative",radius:"150",zIndex:2},T,o.createElement(M.m_M,{tabIndex:-1,content:v,placement:"bottomCenter",maxWidth:30},o.createElement(M.K0,{altText:"Copy link",icon:o.createElement(eA.J,null),onClick:y}))):o.createElement(o.Fragment,null,o.createElement(M.mcf,null,T,r&&!!w&&o.createElement(eF,null),o.createElement(M.mcf,{position:"relative",zIndex:p?0:2},o.createElement(M.m_M,{tabIndex:-1,content:v,placement:"bottomCenter",maxWidth:30},o.createElement(M.$nd,{variant:i,onClick:y,size:u?"medium":"small"},o.createElement(M.Int,{icon:o.createElement(eA.J,null),color:"primary"===i?"background":"body",size:u?"3":"2"})))))))}let eB=e=>o.createElement(eU,{...e,isTextButton:!0}),ez=e=>o.createElement(eU,{...e,isTextButton:!1});var eW=a(64582),eH=a(7084),eq=a(14365),eY=a.n(eq),eG=a(2361),ej=a(53622),eJ=a(16314),eX=a(89941),eK=a(39328),eZ=a(97489),eQ=a(30254),e0=a(42045),e1=a(37300),e4=a(81066);let e2={},e3=(0,er.J1)`
    query GetViewerInsights($videoId: ID!, $password: String) {
  getVideo(id: $videoId, password: $password) {
    ... on RegularUserVideo {
      id
      __typename
      organization_idv2
      current_user_is_owner
      show_analytics_to_viewer
      views {
        total
        distinct
        named {
          avatar
          firstName
          lastName
        }
      }
    }
  }
}
    `;var e5=a(12208),e6=a.n(e5),e8=a(10551),e9=a(36378),e7=a(83253),te=a(27039),tt=a(46237),ta=a(1885),tn=a(39996),tr=a(96821),to=a(41339),ti=a(9183),tl=a(27986);let ts=a.p+"img/engagement-insights-no-views-1f8a5a9c55bfa04e.svg";var td=a(90725),tc=a(27982),tm=a(99395);let tu={modal:"viewer-insights_modal_El5",small:"viewer-insights_small_Rm2",viewerItem:"viewer-insights_viewerItem_z_f",isClickable:"viewer-insights_isClickable_KUe",reactionsAndComments:"viewer-insights_reactionsAndComments_D9t",upgradeHover:"viewer-insights_upgradeHover_Z3p"};var tp=a(53351),tg=a(94063);let th=({children:e,variant:t})=>o.createElement("div",{className:ep()(tu.modal,{[tu.small]:"small"===t})},e),tE=({condition:e,wrapper:t,children:a})=>e?t(a):a,tf=()=>o.createElement(th,{variant:"small"},o.createElement("article",{className:"px:large py:medium my:large flex flexDirection:column items:center"},o.createElement("img",{src:ts,width:80,height:80,className:"mb:large",alt:"No views yet"}),o.createElement(M.EYj,{alignment:"center",fontWeight:"bold"},"Share your video with someone to see their engagement!"))),tv=({hasEngagementInsights:e,showPaywall:t,openInsights:a})=>{let n=(0,tr.z)();return e||t?n?o.createElement("div",{className:"borderTop pt:medium px:large my:medium"},o.createElement(td.Q,{tooltipText:`See the metrics behind how viewers interact and engage with your
                videos.`,tooltipDirection:"bottomCenter"},o.createElement(M.$nd,{onClick:a,width:"full",isDisabled:!e,icon:o.createElement(e9.Q,null)},o.createElement(M.zAb,{gap:"small"},"See Engagement",o.createElement(M.mcf,{width:3,height:3,backgroundColor:"upgrade",radius:"100"},o.createElement(M.W30,null,o.createElement(M.Int,{size:2,icon:o.createElement(te.C,null)}))))))):o.createElement("div",{className:"borderTop pt:medium px:large mb:medium"},o.createElement(tE,{condition:t,wrapper:e=>o.createElement(tn.Q,{analyticsEvent:B.Y99,feature:tl.o1.ENGAGEMENT_INSIGHTS},o.createElement(M.hKd,{top:1}),o.createElement("div",{"data-testid":"engagement-insights-paywall"},o.createElement("div",{className:ep()(tu.upgradeHover)},e)))},o.createElement(M.$nd,{onClick:a,width:"full",isDisabled:!e,icon:o.createElement(e9.Q,null)},"See Engagement"))):null},tw=({viewer:e,hasEngagementInsights:t,onClick:a})=>{let n=(0,tg.f)(e)?e.commentCount:0,r=(0,tg.f)(e)?e.reactionCount:0;return o.createElement("article",{className:ep()(tu.viewerItem,{[tu.isClickable]:t}),onClick:a,tabIndex:0},o.createElement(tc.yh,{avatar:e.user.avatar??null,name:e.user?.name??null}),o.createElement("h4",{className:"ellipsis weight:bold"},e.user.name||"Anonymous"),t&&o.createElement("ul",{className:tu.reactionsAndComments},o.createElement("li",null,o.createElement(M.Int,{icon:o.createElement(e7.C,null),color:"bodyDimmed",altText:"comments count"}),o.createElement("label",null,n)),o.createElement("li",null,o.createElement(M.Int,{icon:o.createElement(tt.N,null),color:"bodyDimmed",altText:"reactions count"}),o.createElement("label",null,r))))};function tb({closeModal:e}){let{video:{id:t,views:a}}=(0,N.McE)(),{isViewerSelected:n,toggleIsViewerSelected:r,setViewer:i}=(0,ta.k)(),{setIsInTheaterMode:l}=(0,L._)(),{endThumbnailFlow:s}=(0,ey.w)(),{setIsEditingCta:d}=(0,ev.u)(),c=(0,to.s1)(eE.fj),m=(0,to.fb)([eE.Te,eE.Wg])&&!c;(0,e8.vC)("esc",t=>{t.preventDefault(),t.stopPropagation(),e6()(e,2500)},{keyup:!0});let u=a?.total||0,p=a?.distinct||0,{data:g,loading:h}=(0,tm.is)({variables:{first:50,videoId:t},client:(0,ti.Wz)(),skip:!c||!u}),{viewersWithEngagements:E}=(0,tg.K)(g),f=(0,tp.k)(a),v=c?E:f;if(!u)return o.createElement(tf,null);let w=c&&h,b=v.slice(0,50),y=t=>{i(t),l(!1),d(!1),s(),n||(r(),(0,e1.$d)()),e()},T=`${u.toLocaleString("en-US")} total ${eY()("view",Number(u))}, ${p.toLocaleString("en-US")} unique ${eY()("viewer",Number(p))}`;return o.createElement(th,{variant:c?void 0:"small"},o.createElement("div",{className:"borderBottom px:large"},o.createElement(M.EYj,{variant:"title",as:"h2"},c?"Engagement":"Viewer"," Insights"),o.createElement(M.EYj,{color:"bodyDimmed",className:"mt:small mb:medium",as:"p"},T)),o.createElement("div",{className:"modal-viewer-list px:small py:medium thin-scrollbars overflow:auto"},w?o.createElement("div",{className:"loading text:center py:xlarge"},o.createElement(M.aHM,{size:"large"})):b.map((e,t)=>o.createElement(tw,{key:t,viewer:e,hasEngagementInsights:c,onClick:c?()=>y(e):void 0}))),o.createElement(tv,{showPaywall:m,hasEngagementInsights:c,openInsights:()=>y(null)}))}let ty=e=>{let t=0,a=[],n,r,o;if(e?.getVideo?.__typename==="RegularUserVideo"&&e.getVideo.views){t=e.getVideo.views.total;let i=e.getVideo.views.distinct;if(n=e.getVideo.organization_idv2,r=e.getVideo.current_user_is_owner,o=e.getVideo.show_analytics_to_viewer,e.getVideo.views.named){let t=e.getVideo.views.named.filter(e=>null!==e).map(e=>({avatar:e?.avatar??void 0,firstName:e?.firstName??void 0}));a=(function(e=[],t=0){let a=e.length;if(a>=3)return e.slice(0,3);let n=t-a-Math.max(0,t-3);if(n<=0)return e;let r=[...e];for(let e=0;e<n;e++)r.push({});return r})(t,i).map(e=>({thumb:e.avatar,name:e.firstName}))}}return{totalViews:t,viewerInfoForAvatars:a,organizationId:n,currentUserIsOwner:r,showAnalyticsToViewer:o}};function tT({buttonHasBorder:e,videoId:t}){let{featureLoadedRef:a}=(0,e0.b)(),{password:n}=(0,x.l)(),{data:r,loading:i,error:l}=function(e){let t={...e2,...e};return eo.IT(e3,t)}({variables:{videoId:t,password:n},onCompleted:e=>{if(e?.getVideo?.__typename!=="RegularUserVideo")throw eK.warning("Invalid viewer insights data",{videoId:t},{feature:d.Xj.EngagementInsights}),Error("Invalid viewer insights data")}});(0,o.useEffect)(()=>{if(l)throw l},[l]);let{totalViews:s,viewerInfoForAvatars:c,organizationId:m,currentUserIsOwner:u,showAnalyticsToViewer:p}=(0,o.useMemo)(()=>ty(r),[r]),g=(0,eX.ym)(m),h=(0,q.d)(t)||u,E=(0,o.useRef)(!1),[f,v]=(0,o.useState)(!1),w=()=>b(!1),b=e=>{e&&!E.current&&((0,e1.rH)(t),E.current=!0),v(e)},{triggerProps:y,layerProps:T,renderLayer:I}=(0,eG.Z4)({isOpen:f,triggerOffset:4,onOutsideClick:w,auto:!0,possiblePlacements:["bottom-center","top-center"]}),C={...T,style:{...T.style,zIndex:1e3}};return i||!(p||h)?null:g&&p||h?o.createElement("div",{ref:a},o.createElement(ej.z,{query:`(min-width: ${eJ.D9}px)`},o.createElement("div",{ref:y.ref},e?o.createElement(M.$nd,{onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&(e.preventDefault(),b(!f))},onClick:()=>b(!f),style:{padding:"var(--lns-space-xsmall)",height:"fit-content"}},o.createElement(tI,{viewerInfoForAvatars:c,totalViews:s})):o.createElement(M.QWc,{onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&(e.preventDefault(),b(!f))},onClick:()=>b(!f),style:{padding:"var(--lns-space-xsmall)",height:"fit-content"}},o.createElement(tI,{viewerInfoForAvatars:c,totalViews:s})))),I(o.createElement("div",{className:f?"block":"none",...C},o.createElement(tb,{closeModal:w})))):o.createElement("div",{ref:a},o.createElement(ej.z,{query:`(min-width: ${eJ.D9}px)`},o.createElement(tC,{totalViews:s})))}let tI=({viewerInfoForAvatars:e,totalViews:t})=>{let a=e.length>0;return o.createElement(M.mcf,{height:3.5,paddingRight:a?"xsmall":"small",paddingLeft:a?"0":"small"},o.createElement(M.W30,{alignment:"center"},o.createElement(M.zAb,null,a?o.createElement(e4.L,{avatars:e}):null,t.toLocaleString("en-US")," ",eY()("view",Number(t)))))},tC=({totalViews:e})=>o.createElement(M.mcf,{paddingX:"small"},o.createElement(M.EYj,{fontWeight:"bold"},e.toLocaleString("en-US")," ",eY()("view",Number(e)))),t_=e=>o.createElement(eZ.i,{feature:d.Xj.EngagementInsights,errorType:eQ.Y.SILENT,additionalLoggingValues:{version:"views button"}},o.createElement(tT,{...e}));var tS=a(78081),tk=a(33318),tA=a(98579),tP=a(53698),tL=a(20752),tR=a(78904);let tD={},tx=(0,er.J1)`
    query GetVideoTitle($videoId: ID!, $password: String) {
  getVideo(id: $videoId, password: $password) {
    __typename
    ... on RegularUserVideo {
      id
      name
    }
  }
}
    `;function tN(e){let t={...tD,...e};return eo.IT(tx,t)}var tM=a(29305),tV=a(36578),tO=a(43676),t$=a(69616),tF=a(51070),tU=a(39919),tB=a(54074),tz=a(61214),tW=a(71716),tH=a(9726),tq=a(4554),tY=a(16943),tG=a(65187),tj=a(41861),tJ=a(50619);let tX={},tK=(0,er.J1)`
    subscription AutoTitleStatusChanged($videoId: ID!) {
  autoFeatureStatusChanged(videoId: $videoId) {
    autoFeatureStatuses {
      id
      autoTitle
      autoTitleStatus
    }
  }
}
    `;function tZ(e){let t={...tX,...e};return tJ.R(tK,t)}let tQ={},t0=(0,er.J1)`
    query GetAutoTitle($videoId: ID!, $password: String) {
  getAutoFeatureStatuses(videoId: $videoId, password: $password) {
    __typename
    ... on AutoFeatureStatuses {
      id
      autoTitle
      autoTitleStatus
    }
    ... on Error {
      message
    }
  }
}
    `;function t1(e){let t={...tQ,...e};return eo.IT(t0,t)}let t4=({isOwnerAfterRecording:e,isSettingEnabled:t,hasAccess:a,autoTitleStatus:n,autoTitle:r,hasTimedOut:i,recordingClient:l,transcriptStatus:s})=>{let{lowCardinalityTags:d}=(0,tj.D)(),c=(0,o.useRef)(!1),m=e&&t&&a;(0,o.useEffect)(()=>{m&&(0,T.startFirstLoadTasks)([{task:T.Tasks.FirstLoadAutoTitle,feature:tV.T.VideoIntelligence,lowCardinalityTags:d,timeoutMs:tF.rI+1e3}])},[m,d]),(0,o.useEffect)(()=>{n===E._87.Auto&&r&&(0,T.firstLoadTaskSuccess)({task:T.Tasks.FirstLoadAutoTitle})},[n,r]),(0,o.useEffect)(()=>{(i||n!==E._87.User)&&n!==E._87.Invalid||(0,T.firstLoadTaskAbort)({task:T.Tasks.FirstLoadAutoTitle,additionalLowCardinalityTags:{abortReason:tU.f.ExpectedUnsuccessfulStatus}})},[n,i]),(0,o.useEffect)(()=>{i&&!c.current&&(c.current=!0,(0,T.firstLoadTaskFail)({task:T.Tasks.FirstLoadAutoTitle,additionalLowCardinalityTags:{failureReason:tU.p.ManualTimeout,autoContextStatus:n,isMeetingRecording:l===tO.kR,transcriptStatus:s,transcriptStatusCategory:s?t$.z_[s]:null}}))},[i,n,l,s])},t2=(e,t,a,n)=>{if(!e||t||a||e?.getAutoFeatureStatuses?.__typename!=="AutoFeatureStatuses")return{autoTitle:null,autoTitleStatus:null};let r=e.getAutoFeatureStatuses;return{autoTitle:r.autoTitle,autoTitleStatus:(0,tF.KB)(r.autoTitleStatus,n,E._87.User)}},t3=()=>{let{isAutoTitleAnimationsCompleted:e,setIsAutoTitleAnimationsCompleted:t}=t5(),{isInEditMode:a}=(0,f.HK)(),{password:n}=(0,x.l)(),{video:{modelId:r,isOwner:i,videoProperties:{recordingClient:l}}}=(0,N.McE)(),s=(0,tG.V)(),d=(0,tB.c)(),c=s&&i,m=(0,tR.u)({videoId:r}),u=!!_.useCurrentUserSelector(e=>e.aiAccess,null)?.autoTitles,{refetch:p}=tN({variables:{videoId:r,password:n},skip:!r}),{queryResult:g,hasTimedOut:h}=(0,tH.f)({queryHook:t1,queryOptions:{variables:{videoId:r,password:n},skip:!r},subscriptionHook:tZ,subscriptionOptions:{variables:{videoId:r}},shouldSubscribe:({queryData:e})=>e.getAutoFeatureStatuses?.__typename==="AutoFeatureStatuses"&&!(0,tF.TQ)(e.getAutoFeatureStatuses.autoTitleStatus),onSubscriptionData:({subscriptionData:e})=>{let t=e.autoFeatureStatusChanged?.autoFeatureStatuses;return eK.info("frontend received auto title subscription event",{videoId:r,autoTitleStatus:t?.autoTitleStatus},{feature:tV.T.VideoIntelligence}),p(),{closeSubscription:!!t&&(0,tF.TQ)(t.autoTitleStatus),refetchQuery:!1}},subscriptionTimeoutMs:s?tF.K1:tF.rI}),{data:v,loading:w,error:b}=g,{autoTitle:y,autoTitleStatus:T}=t2(v,w,b,h),{transcriptStatus:I}=(0,tW.KQ)(),C=(0,_.useCurrentUserSelector)(e=>e.videoSettings?.auto_title!==!1,!1),S=T===E._87.Auto,k=T===E._87.User,A=(0,tz.$)({isSettingEnabled:C,hasAccess:u,transcriptStatus:I,featureStatus:T,isUpload:s}),P=(0,tY.a)(),L=A&&(c||m),R=!T||T===E._87.Pending;(0,o.useEffect)(()=>{let e=w&&L&&R,a=e?s?tF.K1:tF.rI:0,n=setTimeout(()=>{e&&(t(!0),(0,eV.u4)(B.XVb,{title_content:tk.ol.ATTEMPTED_AUTO_GENERATION,video_id:r}),eK.info(`${tq.R} Auto title timed out after ${a}ms`,{videoId:r}))},a);return()=>{clearTimeout(n)}},[w,L,R,s,r,t]),(0,o.useEffect)(()=>{A&&T&&!e&&!a&&T===E._87.Auto&&((0,eV.u4)(B.XVb,{title_content:tk.ol.AUTO_GENERATED,video_id:r}),y&&""!==y&&(eK.info(`${tq.R} Updating video context title to auto title`,{videoId:r}),P(y)))},[A,T,r,t,y,k,P,a,e]);let D=(c||m)&&(!s||d)&&A&&!k&&!e;return t4({isOwnerAfterRecording:m,isSettingEnabled:C,hasAccess:u,autoTitleStatus:T,hasTimedOut:h,autoTitle:y,recordingClient:l,transcriptStatus:I}),{isAutoTitleExpected:A,shouldShowAutoTitleAnimations:D,setIsAutoTitleAnimationsCompleted:t,autoTitle:y??"",isAutoTitleGenerated:S,isUserEditedTitle:k}},t5=(0,tM.A)(e=>({isAutoTitleAnimationsCompleted:!1,setIsAutoTitleAnimationsCompleted:t=>e({isAutoTitleAnimationsCompleted:t})})),t6=()=>o.createElement(M.hKd,{top:1,bottom:1},o.createElement(M.mcf,{height:4,width:60,backgroundColor:"disabledBackground",radius:"full"}));var t8=a(32771),t9=a(24179);let t7={highlighted:"static-title-with-variables_highlighted_CdN"},{GI:ae}=t9,at=({title:e})=>{let t=ae({inputText:e,includeBraces:!1}),a=t.text,n=t.variableIndexes;return o.createElement("div",null,a.map((e,t)=>{let a=n.includes(t);return o.createElement("span",{key:t,className:a?t7.highlighted:void 0},a?`{${e}}`:e)}))};var aa=a(16369),an=a(52379),ar=a(37621);let ao=({isOpen:e})=>{let{setShowDefaultSettings:t}=(0,ar.s)(),a=(0,f.zY)();return o.createElement(an.i,{isOpen:e,onPrimaryClick:()=>{a(f.hu.Edit),t(!0)},title:"Your video title, instantly created",subtitle:"Loom AI automatically generated a title based on your video's content.",placement:"bottomLeft"})},ai={staticTitleEditableContainer:"static-title_staticTitleEditableContainer_YeN",staticTitleEditIcon:"static-title_staticTitleEditIcon_laS",staticTitle:"static-title_staticTitle_ToA",staticTitleWrapper:"static-title_staticTitleWrapper_b9E"},al=({title:e,doesVideoHavePersonalizedTitle:t})=>""===e.trim()?o.createElement("i",null,"(empty)"):t?o.createElement(at,{title:e}):o.createElement("span",{className:ai.staticTitleWrapper},o.createElement("span",{className:ai.staticTitleEditIcon},o.createElement(M.Int,{icon:o.createElement(t8.V,null),color:"primary"})),o.createElement("span",{className:ai.staticTitle},e)),as=({title:e,isEditable:t,isAutoTitleDisplayed:a,doesVideoHavePersonalizedTitle:n,onClick:r})=>{let[i,l]=(0,eG.Mk)();return o.createElement("div",{className:ep()({[ai.staticTitleEditableContainer]:t}),...l},o.createElement(aa.$,{onClick:r},o.createElement(al,{title:e,doesVideoHavePersonalizedTitle:n})),o.createElement(ao,{isOpen:i&&a&&t}))};var ad=a(33438),ac=a(63383),am=a(91533),au=a(12829),ap=a(42172);let ag=()=>{let{video:{id:e,isParentOfPersonalizedCopies:t,personalizationType:a}}=(0,N.McE)(),{hasAccess:n,reason:r}=(0,au.K)(),i=t&&a===E.qg$.Title;return o.createElement(M.m_M,{content:i?"Variables has moved! You can now send personalized videos with AI-generated audio that sounds exactly like you. Record a new video to get started":n?"Personalize your video and title with realistic AI-generated audio that sounds exactly like you":r,tabIndex:-1,placement:"bottomCenter",keepOpen:!0},o.createElement(M.QWc,{icon:o.createElement(ac.U,null),iconPosition:"left",onClick:()=>(0,am.ky)(e,"share-page-title-input"),isDisabled:!n||i,onMouseDown:e=>{e.preventDefault()}},o.createElement(M.EYj,{size:"body-md",fontWeight:"bold",className:ap.A.variableButtonText},"Add audio variable")))},ah=()=>{let{featureLoadedRef:e}=(0,e0.b)();return o.createElement(M.mcf,{refHandler:t=>{e(t)},position:"absolute",right:"small"},o.createElement(ag,null))},aE=()=>o.createElement(eZ.i,{feature:d.Xj.Variables,errorType:eQ.Y.SILENT,additionalLoggingValues:{version:"title bar"}},o.createElement(ah,null));var af=a(10123),av=a(60356);let aw=/{.+?}/g,ab=(e,t,a)=>{let n={start:t.current?.selectionStart??0,end:t.current?.selectionEnd??0};if(e.key===af.mh&&n.start>0){let e={start:t.current?.selectionStart??0,end:t.current?.selectionEnd??0},n=a.substring(0,e.start-1),r=a.substring(e.end-1,a.length),o=n.lastIndexOf("{");o>-1&&r.startsWith("}")&&t.current?.setSelectionRange(o+1,o+1,"forward")}},ay=(e,t)=>{let a;let n={start:e.current?.selectionStart??0,end:e.current?.selectionEnd??0},r=/{[^}]*}/g;for(;a=r.exec(t);){let t=a.index,o=r.lastIndex;if(n.start>t&&n.start<=o&&n.end>t&&n.end<=o){e.current?.setSelectionRange(o,o,"forward");return}}},aT=(e,t,a,n,r,o)=>{let i=e.target.value,l=i.match(aw),s=a.match(aw),d=l?l.length:0;if((s?s.length:0)>d){let e=i.lastIndexOf("{",r),l=a.substring(e).indexOf("}")+e,s=i.substring(0,e)+(-1===l?"":i.substring(l));if(n(s),t.current&&r){let a=l+1-e;requestAnimationFrame(()=>{if(t.current){let e=r-a;t.current.setSelectionRange(e,e,"forward")}}),o()}}else n(i)};var aI=a(18652);let{En:aC}=t9,a_=e=>{let t="calc(3.5*var(--lns-unit))";return{fontSize:"var(--lns-fontSize-heading-sm)",fontWeight:"var(--lns-fontWeight-bold)",backgroundColor:"transparent",height:"var(--lns-space-xlarge)",width:"-webkit-fill-available",paddingTop:t,paddingBottom:t,paddingRight:e?"188px":"0"}},aS=({initialValue:e="",saveVideoTitle:t,trackSaveTitleEvent:a,hasVariablesAccess:n})=>{let[r,i]=(0,o.useState)(e),l=o.useRef(null),{titleRef:s,exitEditMode:d,cursorPosition:c,saveCursorPosition:m}=(0,f.HK)(),[u,p]=(0,o.useState)(aC(r)),g=()=>{d()},h=()=>{(0,av.C)(r)&&(""!==r.trim()&&(t({previousTitle:e,newTitle:r}),a()),g())};return(0,M.WrI)(l,h),o.createElement("div",{ref:l},o.createElement(M.m_M,{isDisabled:(0,av.C)(r),placement:"bottomCenter",content:`Title needs to be less than ${ad.Ri} characters`,isInline:!1},o.createElement(M.mcf,{paddingY:"xsmall",paddingLeft:"large",paddingRight:"medium"},o.createElement(aI.$,{ref:s,autoFocus:!0,value:r,onChange:e=>{if(m(),u){aT(e,s,r,i,c??0,m);return}i(e.target.value),p(aC(e.target.value))},onSelect:()=>{u&&ay(s,r)},onFocus:e=>{e.target.select()},onKeyUp:m,onClick:m,onKeyDown:e=>{e.key===af.tJ&&h(),e.key===af.qh&&g(),u&&ab(e,s,r)},icon:o.createElement(t8.V,null),style:a_(n),hasError:!(0,av.C)(r),addOn:n?o.createElement(aE,null):null}))))},ak=(e,t,a)=>t||a||!e||!e.getVideo||"RegularUserVideo"!==e.getVideo.__typename?"":e.getVideo.name,aA=()=>{let{featureLoadedRef:e}=(0,e0.b)(),{isInEditMode:t,enterEditMode:a}=(0,f.HK)(),{isAutoTitleExpected:n,autoTitle:r,shouldShowAutoTitleAnimations:i,setIsAutoTitleAnimationsCompleted:l,isAutoTitleGenerated:s,isUserEditedTitle:d}=t3(),c=(0,tL.uc)(),{video:{currentUserCanEdit:m,id:u,isParentOfPersonalizedCopies:p,personalizationType:g}}=(0,N.McE)(),{password:h}=(0,x.l)(),{data:v,loading:w,error:b}=tN({variables:{videoId:u,password:h}}),y=ak(v,w,b),T=s&&r?r:y,I=p&&g===E.qg$.Title,C=(0,q.d)(u),_=(0,tR.u)({videoId:u}),S=m||C,k=(0,tP.E)(),A=(0,o.useCallback)(()=>{S&&a(f.UF.TitleBar,u)},[a,S,u]);(0,o.useEffect)(()=>{_&&!n&&(A(),(0,eV.u4)(B.XVb,{title_content:tk.ol.DEFAULT,video_id:u}))},[_,n,A,u]);let P=(0,f.Km)();return o.createElement("div",{style:{display:"contents"},ref:e},P?null:void 0===_||w?o.createElement(t6,null):t?o.createElement(aS,{initialValue:T,saveVideoTitle:k,trackSaveTitleEvent:()=>{d||(0,eV.u4)(B.XVb,{title_content:s?tk.ol.USER_EDITED_AUTO_GENERATED:tk.ol.USER_EDITED_DEFAULT,video_id:u}),(0,eV.u4)(B.H15,{video_id:u})},hasVariablesAccess:c}):i?o.createElement(tA.x,{setIsCompleted:l,autoTitle:r,isAutoTitleGenerated:s,onClick:A}):o.createElement(as,{title:T,isEditable:S,isAutoTitleDisplayed:s&&r===T,doesVideoHavePersonalizedTitle:I,onClick:A}))},aP=()=>o.createElement(eZ.i,{feature:d.Xj.TitleBar,errorType:eQ.Y.SILENT},o.createElement(aA,null));var aL=a(80254),aR=a(44021);let aD={titleBarContainer:"title-bar_titleBarContainer_Vsm",isInEditMode:"title-bar_isInEditMode_fKa",titleBarViewsContainer:"title-bar_titleBarViewsContainer_om6"},{AnonDownloadVideoOnSharePage:ax}=eI.Lm,aN=({videoId:e})=>{let{isInEditMode:t}=(0,f.HK)(),a=(0,_.useIsCurrentUserLoggedIn)(),n=(0,eH.o)(),{openModal:r}=(0,V.U)(),{video:{downloadable:i}}=(0,N.McE)(),l=(0,N.FQu)(e),{areDownloadsDisabled:s}=(0,eW.S)(e),d=i&&!s;return o.createElement("div",{className:ep()(t&&aD.isInEditMode,aD.titleBarContainer,n&&"shadow:small")},o.createElement("div",null,o.createElement(aP,null),t?null:o.createElement(eS,null)),t?null:o.createElement("div",{className:aD.titleBarViewsContainer},o.createElement(t_,{videoId:e,buttonHasBorder:!0}),!1===a?o.createElement(o.Fragment,null,o.createElement(eB,{hasTransparentBackground:!0,videoId:e,analyticsSource:"share_page"}),d?o.createElement(M.m_M,{content:"Download video",placement:"bottomCenter",tabIndex:-1},o.createElement(M.K0,{altText:tS.dC,icon:o.createElement(eT.n,null),onClick:()=>{l?.pause(),eV.u4(B.GN$,{...(0,aL.x)(B.GN$,y.T.video(e,"videoId")),isDownloadVideoEnabled:d}),r({modalType:(0,aR.Ge)(),options:{header:"Sign up to download this video",hideModeSwitcher:!0,gate:eI.JH.HARD_GATE_DOWNLOAD,source:ax}})}})):null):null))};var aM=a(17729),aV=a(21682),aO=a(29262);let a$={},aF=(0,er.J1)`
    mutation UpdateRecordingVideoDocumentType($videoId: ID!, $recordingDocumentationType: WorkflowTemplateType!) {
  result: updateRecordingVideoDocumentType(
    videoId: $videoId
    recordingDocumentationType: $recordingDocumentationType
  ) {
    ... on UpdateRecordingVideoDocumentTypePayload {
      success
    }
    ... on UserNotAuthorizedError {
      message
    }
    ... on VideoNotFoundError {
      message
    }
  }
}
    `,aU=({recordingDocumentationType:e})=>{let{video:{id:t}}=(0,N.McE)(),[a,{error:n}]=function(e){let t={...a$,...e};return es.n(aF,t)}({variables:{videoId:t,recordingDocumentationType:e}});null!=e&&t&&a()};var aB=a(93784),az=a(15599),aW=a(90654),aH=a(94448),aq=a(19763),aY=a(8468),aG=a(65311),aj=a(21217),aJ=a(19939),aX=a(59724),aK=a(58234),aZ=a(25902),aQ=a(53914);let a0=(0,eC.A)(()=>a.e("7626").then(a.bind(a,6753)).then(e=>({default:e.MemberVideoThresholdBanner}))),a1=e=>o.createElement(o.Suspense,{fallback:null},o.createElement(a0,{...e})),a4=()=>{let e=(0,aZ.C)(aY.sH),t=(0,_.useCurrentUserSelector)(e=>e.checklist?.first_video_recording,!1),{featureLoadedRef:a}=(0,e0.b)(),{video:{id:n}}=(0,N.McE)(),r=(0,aQ.T)({videoId:n}),i="Notification"in window,l=(0,eX.DX)(),d=(0,eX.bA)(),c=l.nearLimit,m=r&&e&&t&&!d&&i&&Notification.permission!==s.q$,u=t&&i&&Notification.permission===s.q$;return o.createElement(_.LoggedInOnly,null,o.createElement(M.mcf,{refHandler:e=>{a(e)}},c&&o.createElement(aX.P,{name:aG.qp.MEMBER_VIDEO_THRESHOLD_BANNER},o.createElement(a1,{memberVideoLimit:l})),m&&o.createElement(aJ.$,{bannerLocation:aK.Rm}),u?o.createElement(aj.v,{onSharePage:!0}):null))},a2=()=>o.createElement(eZ.i,{feature:d.Xj.Banners,errorType:eQ.Y.SILENT},o.createElement(a4,null));var a3=a(90219);let a5=()=>o.createElement(M.mcf,{position:"absolute",top:0,width:"100%",height:"100%",backgroundColor:"backdropDark",zIndex:2},o.createElement(a3.xP,null));var a6=a(8762),a8=a(39995),a9=a(59179),a7=a(65e3),ne=a(78845),nt=a(74375),na=a(9150),nn=a(56845),nr=a(81252);let no=({children:e,setHeaderPortalContext:t})=>((0,o.useEffect)(()=>(t({children:e}),()=>t({children:null})),[e,t]),null);function ni({children:e}){return o.createElement(nr.x.Consumer,null,t=>o.createElement(no,{setHeaderPortalContext:t?.setHeaderPortalContext},e))}var nl=a(5637),ns=a(331),nd=a(38242),nc=a(99633),nm=a(98529),nu=a(51494),np=a(56219),ng=a(61175),nh=a.n(ng),nE=a(42272),nf=a(54955),nv=a(76837),nw=a(67437),nb=a(88424);function ny(){return o.createElement(nb.default,{label:"",testId:"ads-refreshed-icon"})}a(42004);var nT=a(19046),nI=a(87722),nC=a(89663),n_=a(21395),nS=a(10758),nk=a(36304),nA=a(39381),nP=a(63685),nL=a(58573),nR=a(6723),nD=a.n(nR),nx=a(20272),nN=a(46638),nM=a(26686),nV=a(8666),nO=a(80044),n$=a(48761),nF=a(24673),nU=a(39215),nB=a(81815),nz=a(21794),nW=a(46139),nH=a(60344),nq=a(32836);let nY=({trimProgressData:e,setisRegeneratingMp4OnDemand:t})=>{let[a,n]=(0,o.useState)(0),r=a<100;return(0,o.useEffect)(()=>{if(e?.videoTrimProgressUpdated?.progress){let a=e.videoTrimProgressUpdated.progress;if(-1===a){t(!1);return}let r=Math.floor(a);n(r)}},[e,t]),o.createElement(M.m_M,{placement:"leftCenter",triggerOffset:38,maxWidth:32},o.createElement("span",null,"Preparing download"),r&&o.createElement("span",{style:{fontFeatureSettings:"tnum"}},` (${a}%)`))};var nG=a(70349),nj=a(3882),nJ=a(11748);let{AnonDownloadVideoOnSharePage:nX}=eI.Lm,nK=e=>{switch(e){case tS.R_:return{key:tS.R_,icon:o.createElement(eA.J,null),title:tS.R_};case tS.oV:return{key:tS.oV,icon:o.createElement(nS.c,null),title:tS.oV};case tS.i2:return{key:tS.i2,icon:o.createElement(nw.f,null),title:tS.i2};case tS.mj:return{key:tS.mj,icon:o.createElement(nf.I,null),title:tS.mj};case tS.$3:return{key:tS.$3,icon:o.createElement(nE.l,null),title:tS.$3};case tS.Lz:return{key:tS.Lz,icon:o.createElement(eT.n,null),title:tS.Lz};case tS.Zg:return{key:tS.Zg,icon:o.createElement(nC.e,null),title:tS.Zg};case tS.SJ:return{key:tS.SJ,icon:o.createElement(n_.R,null),title:tS.SJ};case tS.bZ:return{key:tS.bZ,icon:o.createElement(nT.r,null),title:tS.bZ};case tS.tn:return{key:tS.tn,icon:o.createElement(ny,null),title:tS.tn};case tS.xf:return{key:tS.xf,icon:o.createElement(nv.e,null),title:tS.xf};case tS.Dn:return{key:tS.Dn,icon:o.createElement(nI.j,null),title:tS.Dn};case tS.Cq:return{key:tS.Cq,icon:o.createElement(e7.C,null),title:tS.Cq};case tS.S$:return{key:tS.S$,icon:o.createElement(nv.e,null),title:tS.S$};default:return{}}},nZ=[tS.oV,tS.Dn,tS.i2,tS.mj,tS.$3,tS.S$,tS.Lz,tS.Zg,tS.SJ,tS.xf,tS.Cq],nQ=e=>e.every(e=>e),n0=({video:e,scopes:t,permissions:a,completeTrigger:n,extras:r,fetchShareVideoDownloadUrl:i,onLargeTabletOrDesktop:l,onLargeTabletOrSmaller:s,currentPlanIsFreePlan:c,onSmallDesktop:m,isLoggedIn:u,needsPassword:p,password:g,onLargeTablet:h,setVideo:f,startDownload:v,workspace:w})=>{let{areDownloadsDisabled:I,refetchDownloadDisabledForVideo:C}=(0,eW.S)(e.id),_=(0,N.FQu)(e.id),S=!I,{showErrorBar:k}=(0,A.Nl)(),{openModal:L}=(0,V.U)(),R=(0,eM.H)(),{setUrl:D}=(0,ne.G)(),[x]=(0,nJ.D)({variables:{videoId:e.id,newName:(0,nq.fd)(e.title),spaceId:null,password:g},onCompleted:e=>{let{setShowConfirmationToast:t}=nL.U.getState();if(e?.duplicateVideo?.__typename==="DuplicateVideoPayload"&&e.duplicateVideo.newVideo){t(`${e.duplicateVideo.newVideo?.name||"Duplicated video"} successfully created`);let a=`https://${W.w5}/share/${e.duplicateVideo.newVideo.id}`;nh()(a,{format:"text/plain"}),window.open(a,"_blank")}else k({message:"Oops! Failed to duplicate video.",severity:U.M.ERROR})},onError:()=>{k({message:"Oops! Failed to duplicate video.",severity:U.M.ERROR})}}),[O]=(0,nO.X)({variables:{videoId:e.id},update(t,{data:a}){a?.removeVideoFromWatchLaterList?.__typename==="RemoveVideoFromWatchLaterListPayload"&&(t.updateQuery({query:nD()},e=>{let t=e?.result?.unwatchedCount;if(t)return{result:{...e.result,unwatchedCount:t-1}}}),t.evict({id:t.identify({id:e.id,__typename:"RegularUserVideo"})}),t.gc())}}),[$]=(0,nj.N)({variables:{videoIds:[e.id],isArchived:!0},onCompleted:e=>{let{setShowConfirmationToast:t}=nL.U.getState();e?.result?.__typename==="ArchiveVideosPayload"?(O(),t("Video archived"),window.location.href=`${W.J4}${W.AA}`):k({message:"Oops! Failed to archive video.",severity:U.M.ERROR})},onError:()=>{k({message:"Oops! Failed to archive video.",severity:U.M.ERROR})}}),{userIsOwner:F,userCanEdit:z,userInSameWorkspace:q,userIsLoomAdmin:Y}=a,[G,j]=o.useState(!1),J=(0,eO.sU)(),{data:X}=(0,nG.c)({variables:{videoId:e.id},skip:J}),K=X?.videoTrimProgressUpdated?.progress!==null&&X?.videoTrimProgressUpdated?.progress!==void 0&&X?.videoTrimProgressUpdated?.progress!==100&&X?.videoTrimProgressUpdated?.progress!==-1,Z=X?.videoTrimProgressUpdated?.progress===-1&&null===r.downloadUrl,Q=e.processingInformation.trimId?Date.now()-e.processingInformation.trimId:15001,ee=!X&&(Q<15e3||!e.complete),[et]=(0,nM.c)({variables:{input:{videoId:e.id,regenerationType:E.EgF.Download}}}),ea=(0,H.wN)(b.Y0.ADMIN_IA_IMPROVEMENTS,e.organization_id,b.mD.STATSIG_FEATURE_GATE),en=t.hasDownloadsScope,er=async()=>{if(!en)return;let t=r.downloadUrl,a={video_id:e.id,is_owner:e.isOwner,video_age:e.createdAt?(0,nU.N8)(e):"NA"};if(eV.u4(B.SLF,a),await C())return;if(null==t&&!Z&&!G&&!J){et(),j(!0);return}if(null==t)return;let o=`${e.title||e.id}.mp4`,i={url:t,name:o,opts:a,password:g};if(r.shouldShowDownloadInfoModal)L({modalType:P.YH,options:i}),n(aY.Ap);else{if(!u){_?.pause(),L({modalType:(0,aR.Ge)(),options:{header:"Sign up to download this video",hideModeSwitcher:!0,gate:eI.JH.HARD_GATE_DOWNLOAD,source:nX}});return}v(i)}G&&j(!1)},eo=o.useRef(er);o.useEffect(()=>{eo.current=er},[er]),o.useEffect(()=>{X?.videoTrimProgressUpdated?.progress===100&&(X?.videoTrimProgressUpdated?.transcodedUrl?D(X.videoTrimProgressUpdated.transcodedUrl):i())},[X,D,i]),o.useEffect(()=>{G&&r.downloadUrl&&eo.current()},[G,r.downloadUrl]);let ei=a=>{switch(a){case tS.R_:return nQ([!e.archived])&&l&&m&&u?{...nK(tS.R_),onClick:()=>{(0,eO.F8)({videoUrl:`https://${W.w5}/share/${e.id}`}),eV.u4(B.VHe,{...(0,aL.x)(B.VHe,y.T.video(e.id,"video_id")),source:"kebab_menu"})}}:null;case tS.oV:return nQ([!e.archived,t.hasAuthenticatedAccess])&&h&&c?{...nK(tS.oV),onClick:()=>{L({modalType:P.DN,options:{videoId:e.id,setVideo:f,source:nx.C.ChangePrivacy}})}}:null;case tS.Dn:return s?{...nK(tS.Dn),onClick:()=>{L({modalType:P.af,options:{useResponsive:!0}})}}:null;case tS.i2:return nQ([z,q,!e.archived,t.hasVideoToolsAccessScope,t.hasAuthenticatedAccess])?{...nK(tS.i2),disabled:e.isParentOfPersonalizedCopies,onClick:()=>{let t=e.folder??{},a={...e,folder:t},n=[];u&&n.push({type:nk.Vz}),L({modalType:P.Iu,options:{videos:[a],filters:n,navigateToDestinationFolderAfterMove:!1}}),eV.u4(B.qC6,{rootFolder:e.folder_id,isOwner:e.isOwner})},title:e.isParentOfPersonalizedCopies?o.createElement(nF.O,{title:tS.i2,content:"This video contains variables and must remain in its folder."}):tS.i2}:null;case tS.mj:return nQ([F||e.isTeamShared&&q,!e.archived,t.hasVideoToolsAccessScope,t.hasAuthenticatedAccess,e.personalizationType!==E.qg$.Audio])?{...nK(tS.mj),onClick:()=>{x(),eV.u4(B.Tct,{...(0,aL.x)(B.Tct,y.T.video(e.id,"entity_id")),clickSource:"share-page",entityType:"video",workspace:"private"})}}:null;case tS.$3:return nQ([F||e.isTeamShared&&q,!e.archived,t.hasArchiveAccessScope,t.hasAuthenticatedAccess])?{...nK(tS.$3),onClick:()=>{(0,T.abortAllFirstLoadTasks)({abortReason:"archive-video"}),$()}}:null;case tS.Lz:{if(!nQ([e.downloadable,!p,!e.archived,u,S]))return null;let t=!e.isParentOfPersonalizedCopies&&e.personalizationType===E.qg$.Audio,a=t?o.createElement(o.Fragment,null,R&&o.createElement("span",{onClick:e=>e.stopPropagation()},o.createElement(nW.y,null)),o.createElement(nF.O,{title:tS.Lz,content:"This video contains variables and cannot be downloaded"})):o.createElement(o.Fragment,null,R?o.createElement(M.zAb,{autoFlow:"column"},o.createElement(n$.p,{scope:eE.wJ,placement:"rightCenter",title:tS.Lz,feature:tl.o1.DOWNLOAD,highlightText:"Download your video"}),o.createElement(M.hKd,{left:"large"},o.createElement("span",{onClick:e=>e.stopPropagation()},o.createElement(nW.y,null)))):o.createElement(n$.p,{scope:eE.wJ,placement:"rightCenter",title:tS.Lz,feature:tl.o1.DOWNLOAD,highlightText:"Download your video"}));return{...nK(tS.Lz),disabled:ee||G||K||Z||t,icon:en?o.createElement(eT.n,null):o.createElement(M.Int,{color:"disabledContent",icon:o.createElement(eT.n,null)}),onClick:()=>er(),title:(G||K)&&en&&!t?o.createElement(nY,{videoId:e.id,trimProgressData:X,setisRegeneratingMp4OnDemand:j}):a}}case tS.Zg:{if(!nQ([e.downloadable,!p,!e.archived,u,S]))return null;let a=t.hasDownloadsScope,n=r.captionDownloadUrl,i=o.createElement(n$.p,{scope:eE.wJ,placement:"rightCenter",title:tS.Zg,feature:tl.o1.DOWNLOAD_CAPTIONS,highlightText:"Download captions"});return{...nK(tS.Zg),disabled:!n,icon:a?o.createElement(nC.e,null):o.createElement(M.Int,{color:"disabledContent",icon:o.createElement(nC.e,null)}),onClick:async()=>{if(eV.u4(B.MTJ,{...(0,aL.x)(B.MTJ,y.T.video(e.id,"video_id")),isOwner:e.isOwner,source:"kebab_menu",memberRole:w?.memberRole,currentPlan:w?.type}),a){if(!u){L({modalType:(0,aR.Ge)(),options:{header:"Sign up to download these captions",hideModeSwitcher:!0,gate:eI.JH.HARD_GATE_DOWNLOAD,source:nX}});return}if(n){if(await C())return;try{await (0,nH.rs)(n,`${e.title||e.id}.srt`),eV.u4(B.LRz,{...(0,aL.x)(B.LRz,y.T.video(e.id,"video_id")),isOwner:e.isOwner,memberRole:w?.memberRole,currentPlan:w?.type})}catch(e){eK.error("Unable to download captions",{error:e},{feature:d.Xj.TranscriptExtraction})}}}},title:i}}case tS.SJ:return nQ([F||e.isTeamShared&&q,t.hasVideoToolsAccessScope,t.hasAuthenticatedAccess])?{...nK(tS.SJ),onClick:()=>{L({modalType:P.rv,options:{videos:[{...e,password:g}],redirectUrl:`https://${W.w5}${W.AA}`}})}}:null;case tS.xf:return Y||nB.Cu?{...nK(tS.xf),onClick:()=>{let t=`https://${W.w5}/admin/videos/video-dive/${e.id}`;window.open(t,"_blank")}}:null;case tS.S$:return nQ([t.hasAdminManagementAccessScope,q,w?.memberRole===nA._1,e.privacy!==ad.vQ])?{...nK(tS.S$),onClick:()=>{eV.u4(B.XaP,{...(0,aL.x)(B.XaP,y.T.video(e.id,"video_id"),y.T.workspace(w?.id,"string","workspace_id"))}),window.open(ea?`https://${W.w5}${W.dp}?video=${e.id}`:`https://${W.w5}${W.a_}?video=${e.id}`,"_blank")}}:null;case tS.Cq:{if("none"===r.contactSalesButtonType)return null;let e=new URL(W.Cq,window.location.origin);return l?null:{...nK(tS.Cq),onClick:()=>{window.open(e.toString(),"_blank")}}}default:return null}};return nZ.map(e=>ei(e)).filter(e=>e)},n1=({currentPlanIsFreePlan:e})=>{let t=(0,to.s1)(eE.i4),a=(0,to.s1)(eE.zm),n=(0,to.s1)(eE.K2),{setVideo:r,video:o}=(0,N.McE)(),{needsPassword:i,password:l}=(0,g.l)(),{url:s}=(0,ne.G)(),{transcriptStatus:d}=(0,tW.cK)(),{captionsUrl:c}=(0,nN.$)(),{fetchShareVideoDownloadUrl:m}=(0,nV.N)(),u={hasVideoSharePrivateScope:(0,to.s1)(eE.vq),hasPersonalLibraryWriteScope:(0,to.s1)(eE.dw),hasTeamLibraryWriteScope:t,hasVideoToolsAccessScope:a,hasArchiveAccessScope:n,hasAuthenticatedAccess:(0,to.s1)(eE.F4),hasDownloadsScope:(0,to.s1)(eE.wJ),hasAdminManagementAccessScope:(0,to.s1)(eE.AR)},p=(0,eX.ym)(o?.organizationId),h=(0,tW.Zx)(),E=(0,_.useCurrentUserSelector)(e=>e.role===nP.KC,!1),f=(0,_.useIsCurrentUserLoggedIn)(),{selectedWorkspace:v}=(0,nt._d)(),w={userIsOwner:!!o.isOwner,userCanEdit:!!o.currentUserCanEdit,userInSameWorkspace:p,userCanAccessTranscript:h,userIsLoomAdmin:E},[b]=(0,ns.e)(),y={shouldShowDownloadInfoModal:(0,aZ.C)(aY.Ap),transcriptStatus:d,captionDownloadUrl:c,downloadUrl:s,videoButtonsShowing:(0,eD.N$)(`(min-width: ${eJ.D9}px)`),contactSalesButtonType:b?"link":"none"},T=(0,nz.h)(),I=(0,eD.Te)(),C=(0,eD.zM)(),S=(0,eD.GE)(),k=(0,eD.qI)(),A=(0,a7.T)(),P=(0,nc.Qn)();return n0({completeTrigger:T,currentPlanIsFreePlan:e,extras:y,fetchShareVideoDownloadUrl:m,hideSideNav:A,isLoggedIn:f,needsPassword:i??!0,onLargeTablet:S,onLargeTabletOrDesktop:I,onLargeTabletOrSmaller:C,onSmallDesktop:k,password:l,permissions:w,scopes:u,setVideo:r,startDownload:P,video:o,workspace:v})},n4=({currentPlanIsFreePlan:e=!1})=>{let t=n1({currentPlanIsFreePlan:e}),{featureLoadedRef:a}=(0,e0.b)(),n=e=>({title:e.title||"",icon:e.icon||null,onClick:e.onClick||(()=>null),disabled:e.disabled||!1});if(1===t.length){let e=t[0];if(!e||e.title===tS.R_)return null;let{title:a,icon:r,onClick:i,disabled:l}=n(e);return o.createElement(M.K0,{altText:a,icon:r,onClick:i,isDisabled:l})}let r=t.filter(Boolean).map(e=>n(e));return 0===r.length?null:o.createElement("div",{ref:a},o.createElement(M.msM,{options:r,trigger:o.createElement(M.m_M,{tabIndex:-1,content:"More actions",placement:"bottomCenter"},o.createElement(M.K0,{"data-testid":"toggleActions",id:"toggleActions",altText:"Toggle actions",icon:o.createElement(np.G,null)})),menuPosition:"right",menuZIndex:1001}))},n2=e=>o.createElement(eZ.i,{feature:d.Xj.OverflowActionsMenu,errorType:eQ.Y.SILENT},o.createElement(n4,{...e})),n3=({videoId:e})=>{let t=(0,eD.GE)(),{shouldShowLoomBranding:a}=(0,S.O)({videoId:e});return a?o.createElement(M.zAb,{gap:t?1:3},[{name:"Learn to Loom",path:W.Ju},{name:"How to Record",path:W.Tn},{name:"Loom Blog",path:W.nz},{name:"Pricing",path:W.bP}].map((e,t)=>o.createElement(M.QWc,{htmlTag:"a",className:"weight:book",key:t,href:`https://loom.com${e.path}`,onClick:()=>eV.u4(B.B$k,{path:e.path}),target:"_blank"},e.name))):null},n5=({variant:e,onClick:t})=>{let a=(0,eD.Te)();return o.createElement("div",{className:"relative"},o.createElement(M.$nd,{"data-testid":"share-modal-button",variant:e,icon:o.createElement(nS.c,null),onClick:t,size:a?"medium":"small"},"Share"))},n6=({videoId:e,source:t,variant:a})=>{let{openModal:n}=(0,V.U)(),{setVideo:r}=(0,N.McE)(),i=(0,N.FQu)(e);return o.createElement(M.m_M,{content:"Share video",placement:"bottomCenter"},o.createElement(n5,{variant:a,onClick:()=>{i?.pause(),n({modalType:P.DN,options:{source:nx.C.ShareButton,videoId:e,setVideo:r}}),eV.u4(B.$Q7,{...(0,aL.x)(B.$Q7,y.T.video(e,"video_id")),source:t})}}))},n8={leftButton:"split-share-copy-button_leftButton_wDy",rightButton:"split-share-copy-button_rightButton_fIg"},n9=({videoId:e,videoTitle:t,showCopyLinkTutorial:a,videoOrganizationId:n})=>{let{isInSameWorkspace:r,isLoading:i}=(0,eX.rD)(n),l=r?"primary":"neutral";return i?o.createElement(M.lsp,{height:"36px",width:"156px",radius:"175",animated:!0}):o.createElement(M.zAb,{gap:r?"1px":"0"},o.createElement("div",{className:n8.leftButton},o.createElement(n6,{videoId:e,variant:l,source:"share_page"})),o.createElement("div",{className:n8.rightButton},o.createElement(ez,{videoId:e,videoName:t,analyticsSource:"share_page",showTutorial:a,variant:l})))},n7={headerContentWrapper:"header-content_headerContentWrapper_A6E"},re=({isLoggedIn:e,fromRecorderParam:t,fromTutorialParam:a})=>{let n=(0,nc.Qn)(),r=(0,eX.Ei)(),{loading:i}=(0,nt._d)(),l=(0,nd.n)(),{video:{downloadable:s,id:d,isOwner:c,title:m,organizationId:u}}=(0,N.McE)(),p=(0,q.d)(d),{password:g}=(0,x.l)(),{url:h}=(0,ne.G)(),[E,{loading:v}]=(0,ns.e)(),w=E&&!Q.Fr,b=(0,to.s1)(eE.wJ),y=`${m||d}.mp4`;(0,o.useEffect)(()=>{let t=(0,eO.sF)("start_download");if(b&&t&&e&&s&&h){n({url:h,name:y,opts:{video_id:d,is_owner:c},password:g});let{pathname:e,search:t}=window.location,a=(0,eO.S_)(["start_download"],t);window.history.replaceState("","",`${e}${a}`)}},[b,y,h,s,e,c,d,g,n]);let{featureLoadedRef:T}=(0,e0.b)(),I=(0,a7.T)(),C=r.type===a6.Bn,_=(0,nm.l)(),S=(0,f.Km)(),k=!e&&!Q.Fr,A=!e&&Q.Fr,P=_&&!Q.Fr,L=!!(t&&a&&c),{show:R}=(0,nu.s)(),D=(0,eD.TU)();return S?o.createElement(o.Fragment,null):k?o.createElement(ni,null,o.createElement("div",{ref:T},o.createElement(n3,{videoId:d}))):A?o.createElement(ni,null,o.createElement("div",{ref:T},o.createElement(eB,{videoId:d,videoName:m,analyticsSource:"share_page",showTutorial:L}))):o.createElement(ni,null,o.createElement("div",{ref:T,className:n7.headerContentWrapper},o.createElement(M.zAb,{gap:"medium"},I?o.createElement(o.Fragment,null,P&&!R?o.createElement(ej.z,{query:`(min-width: ${eJ.Ne}px)`},o.createElement(nl.d,{minimal:!0,shouldShowIncentives:l})):null,i||v?null:o.createElement(a8._,{LoomUI:w?o.createElement(na.J,null):R?null:o.createElement(nn.I,null),AtlassianUI:R?null:o.createElement(a9.i,null)})):null,R||!C||D?o.createElement(n9,{videoId:d,videoTitle:m,showCopyLinkTutorial:L,videoOrganizationId:u}):o.createElement(eB,{videoId:d,videoName:m,analyticsSource:"share_page",showTutorial:L}),p?null:o.createElement(n2,{currentPlanIsFreePlan:C}))))},rt=e=>o.createElement(eZ.i,{feature:d.Xj.Header,errorType:eQ.Y.SILENT},o.createElement(re,{...e}));var ra=a(94532),rn=a(37109),rr=a(76878),ro=a(25532);let ri={},rl=(0,er.J1)`
    subscription VideoDeleted($videoId: ID!, $password: String) {
  videoDeleted(videoId: $videoId, password: $password) {
    videoId
    redirectUrl
  }
}
    `,rs=(e,t=!1)=>{let{password:a}=(0,x.l)(),{showErrorBar:n}=(0,A.Nl)();!function(e){let t={...ri,...e};tJ.R(rl,t)}({variables:{videoId:e,password:a},skip:!e||t,onSubscriptionData:({subscriptionData:t})=>{let a=t.data?.videoDeleted;a?.videoId===e&&(n({message:"Video has been deleted, you are being redirected to the home page.",severity:U.M.WARNING}),setTimeout(()=>{window.location.href=a?.redirectUrl??"/"},5e3))}})};var rd=a(18246);let rc=(0,eC.A)(()=>a.e("1245").then(a.bind(a,99280)).then(e=>({default:e.CelebrationLayer}))),rm=e=>o.createElement(o.Suspense,{fallback:null},o.createElement(rc,{...e}));var ru=a(48232),rp=a(23151),rg=a(40671),rh=a(55400);let rE=()=>{let e=()=>{try{if("u">typeof window&&window.screen&&window.screen.orientation&&window.screen.orientation.type)return window.screen.orientation.type.startsWith("landscape")}catch{}return!1},[t,a]=(0,o.useState)(e());return(0,o.useEffect)(()=>{if(!window.screen||!window.screen.orientation)return;let t=()=>{a(e())};try{window.screen.orientation.addEventListener("change",t)}catch{}return()=>{try{window.screen.orientation.removeEventListener("change",t)}catch{}}},[]),t};var rf=a(35679),rv=a(33787),rw=a(91275),rb=a(15015),ry=a(18714),rT=a(53645),rI=a(56223),rC=a(61279),r_=a(42029),rS=a(47201);let rk={overlay:"mobile-comment-input_overlay_IGL",skeletonContainer:"mobile-comment-input_skeletonContainer_YZ6",mobileCommentTextInput:"mobile-comment-input_mobileCommentTextInput_LZS",mobileCommentInputScrollContainer:"mobile-comment-input_mobileCommentInputScrollContainer_ESg"},rA=()=>{let{comment:e}=(0,rf.j)(),t=(0,r_.Ae)(),a=(0,rS.mF)([e?.avatar??null]);return e?o.createElement("div",{className:rk.skeletonContainer},o.createElement(M.zAb,{gap:t?"medium":"xsmall",columns:["auto","1fr"],alignItems:"start"},o.createElement(rb.M,{singleComment:!0},o.createElement(M.hKd,{right:.5},o.createElement(rw.H,{avatarSrc:a,name:e.user_name,avatarSize:ry.e.FULL}))),o.createElement("div",{className:"comment-container"},o.createElement(M.B19,{justifyContent:"space-between"},o.createElement(M.kS2,null,o.createElement(M.zAb,{gap:"xsmall"},o.createElement(M.EYj,{fontWeight:"bold"},e.user_name??"Anonymous"),o.createElement(rT.g,null,o.createElement(rC.i,{time:e.time_stamp,fontSize:"small",inActivitySidebar:!0}))))),o.createElement("div",null,o.createElement(rI.Y,{comment:e}))))):null},{SignedOutHardGatingComments:rP}=eI.Lm,rL=()=>o.createElement("div",{className:"borderBottom"}),rR=(e,t)=>{(0,o.useEffect)(()=>{if(!e)return;let a=()=>{t.current&&t.current.blur()};return document.addEventListener("touchstart",a,{passive:!0}),()=>{document.removeEventListener("touchstart",a)}},[e,t])},rD=()=>{let e=(0,N.UmM)(),t=(0,N.FQu)(e),a=t?.currentTime??0,[n,r]=o.useState(""),i=(0,o.useRef)(null),[l,s]=(0,o.useState)(!1),[d,c]=(0,o.useState)(!1),{isOpen:m,setIsOpen:u,replyId:p,setReplyId:g,comment:h}=(0,rf.j)(),{createComment:E}=(0,rv.l)({handleOnCompleteCreateComment:e=>{e&&t?.commentCreated(e)}}),{isExpMWebCommentingV2:f}=(0,rh.H)(),{isLoggedUser:v}=(0,N.urm)(),{openModal:w}=V.U.getState();rR(m,i),(0,o.useEffect)(()=>{m&&i.current&&i.current.focus({preventScroll:!0})},[m]);let{video:b}=(0,N.McE)(),y=b?.owner?.displayName?` ${b.owner.displayName}`:"",T=rE();return(0,o.useEffect)(()=>{let e=i.current;e&&(e.style.height="50px",e.style.height=`${e.scrollHeight}px`)},[n,i]),(0,o.useEffect)(()=>{if(l)c(!0);else{let e=setTimeout(()=>{c(!1)},200);return()=>clearTimeout(e)}},[l]),(0,o.useEffect)(()=>{m||(r(""),g(null))},[m,r,g]),f&&m?o.createElement("div",{className:rk.overlay},o.createElement(M.ei1,{isOpen:!0,onCloseClick:()=>{u(!1),g(null),r("")},style:{height:d?"60vh":"unset",position:"fixed",top:"unset",bottom:"env(safe-area-inset-bottom)",borderBottomLeftRadius:"unset",borderBottomRightRadius:"unset",zIndex:10,maxWidth:f&&T?"unset":void 0,transition:"bottom 0.2s ease-out",overflow:"unset"}},o.createElement("div",{className:"p:medium"},o.createElement(M.EYj,{alignment:"center",color:"bodyDimmed"},p?"Reply to thread":`Comment at ${(0,rg.fU)(a)}`)),o.createElement(rL,null),o.createElement("div",{className:rk.mobileCommentInputScrollContainer},h&&p?o.createElement(o.Fragment,null,o.createElement(rA,null),o.createElement(rL,null)):null,o.createElement("div",{className:"flex p:medium"},o.createElement("label",{htmlFor:"mobileCommentTextInput",className:"srOnly"},"Share your thoughts"),o.createElement(M.TMX,{id:"mobileCommentTextInput",ref:i,value:n,onChange:e=>{let t=e.target.value;r(t)},className:rk.mobileCommentTextInput,placeholder:"Share your thoughts",onFocus:()=>s(!0),onBlur:()=>s(!1),style:{border:0,boxShadow:"none",paddingTop:0,fontSize:"16px",overflow:"hidden",resize:"none"}}),o.createElement(M.K0,{onClick:()=>{""!==n.trim()&&(v?E({content:n,parentPostId:p??void 0}):w({modalType:rp.b.HARD_GATE_COMMENT_EMOJI_MODAL,options:{gate:eI.JH.EOVN,anonName:"Anonymous",comment:n,videoOwnerName:y,commentVideoId:b.id,header:"Add your name to this comment",subheader:`${y??"They"} sent this Loom instead of a meeting invite. Use async video to stay connected to your team while staying focused on what counts.`,tertiaryButtonText:"Post comment anonymously",tertiaryButtonIcon:aR.fN.Comment,hideModeSwitcher:!0,source:rP,signupParams:{anonComment:n,anonCommentVideoId:b.id,anonCommentTimestamp:a,signup_source:rP,gate:eI.JH.SSO_ONBOARDING_FLOW}}}),u(!1))},altText:"Send comment button",icon:o.createElement(ru.D,null),iconColor:""===n?"grey2":"blurple"}))))):null},rx=()=>{let e=(0,N.YHL)(),{setIsInTheaterMode:t,isInTheaterMode:a}=(0,L._)(),n=o.useCallback(()=>{let e=!a;t(!a),(0,eV.u4)(B.riK,{on:e})},[t,a]);return o.useEffect(()=>{if(e)return e.on([N.AGW.toggleTheaterMode],n),()=>{e.off([N.AGW.toggleTheaterMode],n)}},[e,n]),null},rN=(0,eC.A)(()=>a.e("8859").then(a.bind(a,9078)).then(e=>({default:e.EngagementBar}))),rM=()=>o.createElement(o.Suspense,{fallback:null},o.createElement(rN,null));var rV=a(78080),rO=a(15770),r$=a(17850),rF=a(99087);let rU=({memberCount:e,suggestedWorkspace:t,requestPending:a,autoJoin:n,avatars:r=[],handleSetDismissed:i,onRequestClick:l})=>o.createElement(o.Fragment,null,o.createElement(ej.z,{query:`(min-width: ${eJ.FB}px)`},o.createElement(M.mcf,{paddingX:"large"},o.createElement(M.mcf,{backgroundColor:"blurpleLight",paddingX:"large",paddingY:"medium",width:"100%",radius:"large",marginTop:"large",marginBottom:"xlarge"},o.createElement(M.zAb,{autoFlow:"column",justifyContent:"space-between"},o.createElement(M.zAb,{autoFlow:"column",gap:"small"},o.createElement(r$.W,{userData:r,maxImages:4,alignment:"left",avatarSize:4}),o.createElement(M.EYj,{htmlTag:"p"},o.createElement("span",{className:"mr:xsmall",role:"img","aria-label":"megaphone"},""),o.createElement(M.EYj,{htmlTag:"span",isInline:!0,fontWeight:"bold"},"Your team is on Loom!"," "),"Join"," ",o.createElement(M.EYj,{isInline:!0,fontWeight:"bold"},e," "),eY()("other",e)," in"," ",o.createElement(M.EYj,{isInline:!0,fontWeight:"bold"},t.name," "),"and gain access to your teams content!")),o.createElement("div",null,o.createElement(M.QWc,{className:"c:blurpleDark mr:small",disabled:a,onClick:()=>{l(t.id)}},a?"Requested":n?"Join":"Request"),a?null:o.createElement(M.QWc,{onClick:i},"Dismiss")))))),o.createElement(ej.z,{query:`(max-width: ${eJ.Ne}px)`},o.createElement(M.mcf,{backgroundColor:"blurpleLight",paddingRight:"xsmall",paddingLeft:"large",paddingY:"medium",marginTop:"large",marginBottom:"xlarge",width:"100%"},o.createElement(M.zAb,{autoFlow:"column",justifyContent:"space-between"},o.createElement(M.zAb,{gap:"medium"},o.createElement(rF.X,{workspace:t,size:5}),o.createElement(M.zAb,{autoFlow:"row"},o.createElement(M.EYj,{fontWeight:"bold"},"Join your team on Loom"),o.createElement(M.EYj,{color:"bodyDimmed",size:"body-sm"},t.name," - members"))),o.createElement(M.mcf,null,o.createElement(M.$nd,{disabled:a,onClick:()=>{l(t.id)},variant:"primary"},a?"Pending":"Join"),o.createElement(M.K0,{className:"ml:small",altText:"Dismiss",icon:o.createElement(ee.h,null),onClick:i}))))));var rB=a(21192);let rz={},rW=(0,er.J1)`
    query GetSuggestedWorkspaceBanner {
  result: getSuggestedWorkspaceForCurrentUser {
    __typename
    ... on JoinableWorkspace {
      ...SuggestedWorkspaceFragment
    }
  }
}
    ${rB.H}`,rH={},rq=(0,er.J1)`
    mutation RequestToJoinWorkspaceMutation($workspaceId: ID!) {
  result: requestToJoinWorkspace(workspaceId: $workspaceId) {
    __typename
    ... on RequestToJoinWorkspacePayload {
      status
      message
      workspace {
        id
        autoJoin
        requestStatus
      }
    }
  }
}
    `,rY=({organizationId:e})=>{let t=(0,eD.TX)(),[a,n]=(0,o.useState)(!1),{data:r,loading:i}=function(e){let t={...rz,...e};return eo.IT(rW,t)}({skip:!e,fetchPolicy:"cache-first"}),[l]=function(e){let t={...rH};return es.n(rq,t)}();if(t||!r?.result||r?.result?.__typename!=="JoinableWorkspace")return null;let s=function(e){let{requestStatus:t,hasPendingInvitation:a,autoJoin:n,workspace:r,isCurrentUserMember:o}=e,i=r?.counts?.users.total_active_workspace_users??0,l=r?.members?.nodes?.map((e,t)=>({id:t,name:e?e.user.first_name:null,avatarSrc:e?rS.mF(e.user.avatars):void 0}));return{workspace:{id:r?.id??"",name:r?.name??"",workspaceLogoPath:r?.workspaceLogoPath??void 0},memberCount:i??void 0,hasPendingInvitation:a,autoJoin:n??null,avatars:l??[],requestStatus:t,isCurrentUserMember:o??null}}(r.result),d=s.workspace.id===e,c=s.requestStatus===rO.$.PENDING,m=!s.isCurrentUserMember&&!a&&!i&&!s.hasPendingInvitation&&!c&&d;return m?o.createElement(rU,{memberCount:s.memberCount,suggestedWorkspace:s.workspace,requestPending:c,autoJoin:s.autoJoin,avatars:s.avatars,handleSetDismissed:()=>{n(!0)},onRequestClick:function(e){l({variables:{workspaceId:e},onCompleted:t=>{t.result?.__typename==="RequestToJoinWorkspacePayload"&&t.result.status&&(eV.u4(B._WN,{...(0,aL.x)(B._WN,y.T.workspace(e,"string","suggestedWorkspaceId")),source:"share-page-banner",status:t.result.status}),t.result.status===rV.GE&&(window.location.href="/"))}})}}):null};var rG=a(99481),rj=a(20630);let rJ=(0,eC.A)(()=>Promise.resolve().then(a.bind(a,90654)).then(e=>({default:e.RecordButton}))),rX=()=>{let{isSDKSupported:e}=(0,rj.Z)(),t=(0,eD.TX)();return t?null:e?o.createElement(M.mcf,{position:"fixed",bottom:2.5,zIndex:10},o.createElement(o.Suspense,{fallback:null},o.createElement(rJ,{priorityList:[aH.hp]},o.createElement(aq.X,{isCollapsed:!1})))):o.createElement("div",{className:"share-video-loom-badge-section"},o.createElement(rG.r,{href:W.J4,title:"Loom homepage"}))};var rK=a(35285),rZ=a(35904),rQ=a(17175),r0=a(35544),r1=a(72878);let r4={[r1.VY]:"This file is currently unsupported on Loom",[r1.Uj]:`The Frames Per Second of your video is above the allowed limit: ${r1.p4}fps.`,[r1.x4]:"The resolution of your video is above the allowed limit: (4k)",[r1.kZ]:`The video length is longer than the allowed limit: ${r1.nL} hours`},r2=`${W.AA}?upload=1`,r3=()=>{window.location.href=W.AA},r5=()=>{window.location.href=r2},r6=()=>{let{video:{processingInformation:e,videoProperties:{externalUpload:t}}}=(0,N.McE)(),{featureLoadedRef:a}=(0,e0.b)(),{videoUploadMessage:n,videoUploadValid:r}=e??{};return o.createElement("div",{ref:a},o.createElement(M.aFV,{isOpen:!0===t&&!1===r,mainButton:o.createElement(M.$nd,{href:r2,htmlTag:"a",variant:"primary",onClick:r5},"Upload New File"),secondaryButton:o.createElement(M.$nd,{href:W.AA,htmlTag:"a",onClick:r3},"Go to Personal Library")},o.createElement(M.EYj,{fontWeight:"bold",size:"body-lg"},n&&r4[n]||"The file could not be processed")))},r8=()=>o.createElement(eZ.i,{feature:d.Xj.VideoUpload,errorType:eQ.Y.DEFAULT},o.createElement(r6,null));var r9=a(28041),r7=a(47030);let oe=(0,eC.A)(()=>Promise.all([a.e("2801"),a.e("3276"),a.e("7011"),a.e("8426"),a.e("3030"),a.e("2950")]).then(a.bind(a,15580)).then(e=>({default:e.AnonymousShareGateDesktopModal}))),ot=({showModal:e=!0,gate:t=eI.JH.ASG})=>o.createElement(o.Suspense,{fallback:null},o.createElement(oe,{showModal:e,gate:t}));var oa=a(37835);let on=(0,eC.A)(()=>a.e("5324").then(a.bind(a,45127)).then(e=>({default:e.AnonymousShareGateMobileModal}))),or=({showModal:e=!0})=>o.createElement(o.Suspense,{fallback:null},o.createElement(on,{showModal:e}));var oo=a(47952),oi=a(31655),ol=a(76031),os=a(71926),od=a(82274),oc=a(33795),om=a(85111),ou=a(48151),op=a(40103);let og=({isOpen:e,onClose:t,url:a,videoId:n})=>{let{featureLoadedRef:r}=(0,e0.b)(),i=(0,_.useCurrentUserSelector)(e=>e.email,void 0),{anonUserName:l}=(0,R.c)(),s=l&&ol.us.test(l)?l:"";return(0,o.useEffect)(()=>{eV.u4(B.XqM,(0,aL.x)(B.XqM,y.T.video(n,"videoId")))},[n]),(0,oi.yl)({onProfilePageViewed:()=>{eV.u4(B.yzq,(0,aL.x)(B.yzq,y.T.video(n,"videoId")))},onDateAndTimeSelected:()=>{eV.u4(B.aJ1,(0,aL.x)(B.aJ1,y.T.video(n,"videoId")))},onEventTypeViewed:()=>{eV.u4(B.mJx,(0,aL.x)(B.mJx,y.T.video(n,"videoId")))},onEventScheduled:()=>{eV.u4(B.Yly,(0,aL.x)(B.Yly,y.T.video(n,"videoId")))}}),o.createElement("div",{ref:r},o.createElement(oi.wA,{url:a,open:e,onModalClose:t,rootElement:document.body,prefill:{email:i||s}}))},oh=()=>{let{video:e}=(0,N.McE)(),{status:t}=(0,os.S0)(e.id),a=(0,ev.g)(e.id),{didRequestCalendlyModal:n,setDidRequestCalendlyModal:r}=(0,op.l)(),i=(0,eO.yJ)(String(a?.ctaUrl)),l=ol.ps.test(i),s="ended"===t,c=(0,om.Z)(s),m=(0,om.Z)(n),[u,p]=(0,o.useState)(!1),{isOwnerInCalendlySegment:g,loading:h,error:E}=(0,ou.V)(e.id,l),f=i.includes("skip_modal_popup=true"),v=(0,oc.C)({videoId:e.modelId||"",trimId:e.processingInformation?.trimId}),{anonUserName:w}=(0,R.c)();return(0,o.useEffect)(()=>{!l||!g||f||(s&&s!==c||n&&n!==m)&&(p(!0),e.isOwner||(0,od._)({videoId:e.modelId||"",sessionId:v.id,isOwner:!!e.isOwner,anonUserName:w}))},[l,g,s,n,c,m,f,e.isOwner,e.modelId,v.id,w]),h||E?null:u?o.createElement(eZ.i,{feature:d.Xj.Calendly,errorType:eQ.Y.SILENT},o.createElement(og,{isOpen:u,onClose:()=>{p(!1),r(!1)},url:i,videoId:e.id})):null};var oE=a(23997),of=a(50151),ov=a(13514);let ow=e=>{let{selectedWorkspace:t}=(0,ov.H)(),a=t?.memberLimits;return e?a?.[e]:a};var ob=a(26216),oy=a(30221);let oT={},oI=(0,er.J1)`
    mutation UpdateUserReachedRecordingLimitChecklistItem($userId: ID!) {
  successful: updateUserReachedRecordingLimitChecklistItem(userId: $userId)
}
    `,oC=({videoDurationLimitToString:e,showToast:t})=>{let a=(0,eX._Q)()!==nA._1?"send a request to your admin to upgrade":"upgrade";return o.createElement(M.y8,{isOpen:t},o.createElement(M.B19,{gap:"medium"},o.createElement(M.kS2,{basis:35},o.createElement(M.EYj,{fontWeight:"bold"},"You've hit the ",e," recording limit."),o.createElement(M.EYj,{size:"body-sm",id:"unlimited-recording-description"},"Create videos with unlimited recording time on the"," ",o.createElement("strong",null,"Business plan")," or above. Click to ",a,".")),o.createElement(M.kS2,{grow:1},o.createElement(of.R,{analyticsEvent:B.Knn,hideTooltip:!0}))))},o_=({videoDurationLimitToString:e,showModal:t})=>{let[a,n]=(0,o.useState)(t),r=()=>{(0,eV.u4)(B.us1),n(!1)},i="recording-limit-description";return o.createElement(M.aFV,{isOpen:t,onCloseClick:r,onBackgroundClick:r,maxWidth:55},o.createElement(M.zAb,{gap:2,autoFlow:"row",justifyItems:"center"},o.createElement("img",{alt:"Person standing in arched doorway with speech bubbles, illustrated",src:oy,height:"88",width:"77"}),o.createElement(M.EYj,{htmlTag:"h1",variant:"mainTitle",alignment:"center"},"You've got a lot to say!"),o.createElement(M.EYj,{id:i,alignment:"center",color:"bodyDimmed"},"You've hit the ",e," recording limit. If you have more to add, upgrade for unlimited recording time."),o.createElement(of.R,{analyticsEvent:B.ykI,ariaLabelledBy:i,defaultButtonText:"Upgrade for unlimited recordings",hideTooltip:!0}),o.createElement(M.QWc,{onClick:r},"Go to my video")))},oS=({fromRecorderParam:e,recordingLimitParam:t})=>{let[a,n]=(0,o.useState)(!1),[r,i]=(0,o.useState)(!1),l=(0,ob.c)(oE.dK),s=ow(oE.dK),d=l||s,c=d?d<60?`${d} second`:`${d/60} minute`:"",m=(0,_.useCurrentUserSelector)(e=>e.id,NaN),u=(0,to.fb)([eE.DG,eE.mq])&&d&&t&&e,[p,{loading:g}]=function(e){let t={...oT,...e};return es.n(oI,t)}({variables:{userId:m},onCompleted:e=>{u&&(e.successful?(n(!1),i(!0)):(n(!0),(0,eV.u4)(B.GeT)))},onError:e=>{eK.warning(e,{userId:m})}});return(0,o.useEffect)(()=>{p({variables:{userId:m}})},[u]),!u||g?null:o.createElement(o.Fragment,null,o.createElement(oC,{videoDurationLimitToString:c,showToast:r}),o.createElement(o_,{videoDurationLimitToString:c,showModal:a}))},ok={},oA=(0,er.J1)`
    query GetIsFirstRecording($fromRecorder: Boolean!, $videoId: String!) {
  getCurrentUser {
    __typename
    ... on GetCurrentUserPayload {
      user {
        id
        isFirstRecording(fromRecorder: $fromRecorder, videoId: $videoId)
      }
    }
  }
}
    `,oP=({fromRecorderParam:e,recordingLimitParam:t})=>{let{video:{hasLoomBranding:a=!0,videoWorkspacePlan:n,id:r}}=(0,N.McE)(),i=(0,aQ.T)({videoId:r}),l=(0,H.lo)({flag:rK.mt,activationValues:r0.J4}),{loading:s,data:d}=function(e){let t={...ok,...e};return eo.IT(oA,t)}({variables:{fromRecorder:e,videoId:r}}),c=(!s&&d?.getCurrentUser?.__typename==="GetCurrentUserPayload"&&d?.getCurrentUser?.user?.isFirstRecording)??!1,{selectedWorkspace:m,isFetching:u}=(0,eX.au)(),p=(0,_.useIsCurrentUserLoggedIn)(),g=m?.type===a6.b3,h=(0,eO.SM)("resume-anon-signup"),E=(0,_.useCurrentUserSelector)(e=>e.memberships?.[0]?.organization.is_pure_trial??!1,!1),{loading:f,value:v}=(0,r7.zc)(rZ._t.ALLOWS_AI),w=m?.type===a6.lZ&&E,{value:b,loading:y}=(0,r9.S)(aG.qp.SEASONAL_LAUNCH_MODAL_VARIANTS),T=p&&i&&!s&&!c&&!h&&!u&&!g&&void 0!==m&&!w&&!f&&!!v&&l&&!b&&!y,I=n===a6.Bn||n===a6.b3||n===a6.lZ,C=Q.Fr&&!p&&I&&a,S=!Q.Fr&&!p&&I&&a,k=(0,oo.u)({meetsAsgMobilePrecheck:C}),A=(0,oa.U)({meetsAsgDesktopPrecheck:S});return o.createElement(o.Fragment,null,o.createElement(oh,null),o.createElement(r8,null),i?o.createElement(oS,{fromRecorderParam:e,recordingLimitParam:t}):null,k?o.createElement(or,{showModal:!0}):null,A?o.createElement(ot,{showModal:!0,gate:eI.JH.ASG}):null,T?o.createElement(_.LoggedInOnly,null,o.createElement(rQ.pL,{workspace:m,skipModal:!T&&!1})):null)};var oL=a(16668),oR=a(71097),oD=a(68633),ox=a(50944),oN=a(59117),oM=a(39352),oV=a(87126),oO=a(40597);let o$=e=>{let t=(0,oN.Ei)(),{data:a,loading:n}=(0,oD.GV)({variables:{workspaceId:t?.id},skip:!t}),r=(0,ox.$)(),i=a?.billing?.billing_details,l=!!i?.paused,s=!!i&&(0,oM.r3)(i),{onClick:d}=(0,oO.L)({...e,paused:l,pureTrial:s});if(n)return null;let c=(0,oV.X)({featureName:oV.m});switch(e.purchaseType){case"request-ai":return o.createElement(M.m_M,{isDisabled:!r,content:c},o.createElement(M.$nd,{isDisabled:r,variant:e.buttonVariant,type:"button",onClick:d},e.cta||"Upgrade"));case"sales-led":return o.createElement(M.m_M,{isDisabled:!r,content:c},o.createElement(M.$nd,{isDisabled:r,type:"button",variant:e.buttonVariant,htmlTag:"a",onClick:d},e.cta||"Contact Sales"));case"add-on-only":return o.createElement(M.m_M,{isDisabled:!r,content:c},o.createElement(M.$nd,{isDisabled:r,type:"button",onClick:d,variant:e.showAiPanelWithWorkflows?"neutral":e.buttonVariant,style:{width:"fit-content"}},e.cta?e.cta:e.showAiPanelWithWorkflows?"Upgrade to Loom AI":"Buy Now"));case"has-ai-addon":return o.createElement(M.$nd,{variant:e.buttonVariant,type:"button",onClick:d},e.cta||"Get Started");default:return o.createElement(M.m_M,{isDisabled:!r,content:c},o.createElement(M.$nd,{isDisabled:r,variant:e.buttonVariant,htmlTag:"a",onClick:d},e.cta||"Upgrade"))}};var oF=a(41912),oU=a(42816),oB=a(58664),oz=a(9806),oW=a(44229);let oH={},oq=(0,er.J1)`
    query GetAiTrialData($workspaceId: ID!) {
  billing: getWorkspaceBillingDetails(workspaceId: $workspaceId) {
    billing_details {
      plan {
        pure_trial
      }
      add_ons {
        id
        price {
          id
          nickname
          product
          unit_amount
          recurring {
            interval
            interval_count
          }
        }
      }
    }
  }
}
    `,oY=({variant:e="ai-limit",isOpen:t,purchaseType:a})=>{let[n,r]=(0,o.useState)(t),i=(0,oB.AR)(),l=(0,oN.Ei)();(0,o.useEffect)(()=>{eV.u4("loom_ai_trial_ended_popup_impression",{purchase_type:a,workspace_type:l?.type})},[a,l]);let s="ai-limit"===e?o.createElement(M.zAb,{gap:"xsmall",justifyContent:"center",autoFlow:"row"},o.createElement(M.zAb,null,o.createElement(M.EYj,{size:"heading-md",fontWeight:"bold",alignment:"center",color:"body",noWrap:!0},"Your Loom Business + AI"),o.createElement(M.mcf,{htmlTag:"span",position:"relative",top:"-5px"},o.createElement(M.guG,{brand:"ai",maxWidth:2,variant:"symbol",symbolColor:"body"}))),o.createElement(M.EYj,{size:"heading-md",fontWeight:"bold",alignment:"center",color:"body",noWrap:!0},"trial is ending")):o.createElement(M.EYj,{size:"heading-md",fontWeight:"bold",alignment:"center",color:"body",noWrap:!0},"Your Loom Business + AI trial has ended");return o.createElement(M.mcf,{position:"relative",zIndex:1e3},o.createElement(aX.P,{name:aG.qp.LOOM_AI_TRIAL_ENDED_FTUX,hasTransition:!1,skipChoreography:!0},o.createElement(M.aFV,{isOpen:n,onCloseClick:()=>{r(!1),i(aG.qp.LOOM_AI_TRIAL_ENDED_FTUX),eV.u4("loom_ai_trial_ended_dismiss_click")},noPadding:!0,"data-lens-theme":"dark",maxWidth:100},o.createElement(oG,null,o.createElement(M.hKd,{top:"medium"}),o.createElement("div",null,s),o.createElement(M.mcf,{width:"50%",margin:"auto"},o.createElement(M.EYj,{alignment:"center",color:"body"},"ai-limit"===e?"Enjoy Loom Business + AI features for one more time on this video. Upgrade to get unlimited access.":"Upgrade to keep unlimited access to Loom AI.")),o.createElement(M.W30,{alignment:"center"},o.createElement(o$,{cta:"Upgrade",purchaseType:a,buttonVariant:"primary",onCloseClick:async()=>{await i(aG.qp.LOOM_AI_TRIAL_ENDED_FTUX)},source:oU.N.AI_TRIAL_ENDED_MODAL}))))))},oG=({children:e})=>o.createElement(M.mcf,{backgroundColor:"#2B1C50",padding:"xlarge",minHeight:"375px",position:"relative",overflow:"hidden"},o.createElement(M.mcf,{position:"absolute",top:"0",left:"0",right:"0",bottom:"0"},o.createElement(oF.o,{size:20,position:[-100,100]}),o.createElement(oF.o,{size:18,position:[-6,-152]}),o.createElement(oF.o,{size:6,position:[92,-20]}),o.createElement(oF.o,{size:2.5,position:[72,68]})),o.createElement(M.W30,{alignment:"center"},o.createElement("div",{className:ep()("loom-ai-trial-ended-controller_content_WOh")},e))),oj=()=>{let e;let t=(0,oz.I)(),a=(0,oN.Ei)(),{isInPredunning:n,loading:r}=(0,oW.N)(),{data:i,loading:l}=function(e){let t={...oH,...e};return eo.IT(oq,t)}({variables:{workspaceId:a?.id},skip:!a?.id}),s=i?.billing?.billing_details,d=a?.type,c=!!s?.plan?.pure_trial,m=a?.organization_properties?.salesSupportType===oR.Sl,u=d===a6.Bn,p=m||d===a6.OV,g=s?.add_ons??[],h=g?g.find(e=>(0,oL.t6)(e.price.product).addon===E.$Jf.Ai):void 0,f=h&&a?.memberRole===nA.m$,v=!h&&a?.memberRole!==nA._1;switch(!0){case f||v:e="request-ai";break;case p:e="sales-led";break;case u||c:e="with-base-plan";break;default:e="add-on-only"}let w=((a?.memberLimits??{})[oE.AI]??0)-1==1,b=t&&!h&&d!==a6.b3&&w||n;return!a||l||r||!b?null:o.createElement(oY,{variant:n?"predunning":"ai-limit",isOpen:b,purchaseType:e})};var oJ=a(91280),oX=a(42681);let oK=({children:e,useAnonymousNavigation:t,videoId:a})=>o.createElement(o.Fragment,null,o.createElement("div",null,o.createElement(oJ.P,{useAnonymousNavigation:t,mainContentHasFullWidth:!0,isShareVideo:!0,videoId:a,hideGlobalHelpBubble:!0},o.createElement(ew.aF,{name:oX.od.ShareVideoIndexSharedErrorBoundary,feature:d.Xj.SharePage},e))));var oZ=a(62018),oQ=a(31663),o0=a.n(oQ),o1=a(74573),o4=a(6390);let o2=a.p+"img/illustrations/drag-to-reposition-bada7560f3b64c33.svg";var o3=a(11034),o5=a.n(o3),o6=a(7827);let o8=(e,t,a,n,r)=>{let o=e=>{t.current?.focus();let{x:o}=(0,o6.Jt)(t.current,e);r(a+o*(n-a))},i=e=>{document.removeEventListener("mousemove",o,!0),document.removeEventListener("touchmove",o,!0),document.removeEventListener("mouseup",i,!0),document.removeEventListener("touchend",i,!0),t.current?.blur()};document.addEventListener("mousemove",o,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("touchmove",o,!0),document.addEventListener("touchend",i,!0),o(e)},o9=({scale:e,setScale:t,minZoom:a,maxZoom:n})=>{let[r,i]=(0,o.useState)(0),l=(0,o.useRef)(null),s=(e-a)/(n-a);(!o5()(s)||s<0)&&(s=0);let d=Math.floor(100*s),c=l.current?.clientWidth||0;return(0,o.useEffect)(()=>{r!==c&&i(c)},[r,c]),o.createElement("div",{tabIndex:0,ref:l,className:"slider relative block bgc:grey4",onMouseDown:e=>o8(e,l,a,n,t),onTouchStart:e=>o8(e,l,a,n,t),onClick:e=>e.preventDefault(),"aria-label":"Zoom slider","aria-valuenow":d,"aria-valuemin":0,"aria-valuemax":100},o.createElement("div",{className:"relative height:100 bgc:white",style:{width:`${d}%`}},o.createElement("span",{className:"zoom absolute bgc:white"})))},o7={dashedBorder:"thumbnail-positioner_dashedBorder_qBc",window:"thumbnail-positioner_window_v2I",editing:"thumbnail-positioner_editing_wi2",loadingSpinner:"thumbnail-positioner_loadingSpinner_rZ6",pointerCursor:"thumbnail-positioner_pointerCursor_umY",drag:"thumbnail-positioner_drag_wNA"};var ie=a(81605),it=a(83355);let ia=({initiateSave:e,currentlyUploading:t,cropperRef:a,thumbnailLocalUrl:n,options:r})=>{let{showErrorBar:o}=(0,A.Nl)(),{finishThumbnailSave:i,toggleThumbnailUploading:l}=(0,ey.w)(),{setShowConfirmationToast:s}=(0,nL.U)(),{video:{id:d},setVideo:c}=(0,N.McE)(),m=(0,ti.Xc)();if(!e||t||!a.current)return;let{x:u,y:p,width:g,height:h}=a.current.getCroppingRect();l();let E=ir(n);if(E.size>1e6*4){o({message:"Selected file too big. Max 4 MB. Please try again.",severity:U.M.ERROR}),l();return}let f=new FormData;f.append("thumbnail",E),f.append("dims",JSON.stringify({...r,x:u,y:p,width:g,height:h})),(0,it.h)(`/v1/videos/${d}`,{method:"PATCH",credentials:"include",body:f}).then(e=>{if(e.status>=400)throw Error(`got a bad response status: ${e.status}`);return l(),s("New thumbnail saved"),i(),eV.u4(B.S2j,(0,aL.x)(B.S2j,y.T.video(d,"video_id"))),e.json()}).then(e=>{c((0,F.L)(e)),m.cache.modify({id:m.cache.identify({id:d,__typename:"RegularUserVideo"}),fields:{thumbnails:t=>{let a=(0,ie.F)(e.thumbnails);return{...t,...a}},defaultThumbnails:t=>({...t,default:e.defaultThumbnails.default,static:e.defaultThumbnails.static})}})}).catch(e=>{o({message:"Oops! Failed to update video thumbnail.",severity:U.M.ERROR}),eK.warning(e,{message:"Error in PATCH to /v1/videos/thumbnail"}),l(),i()})},ir=e=>{let t=e.split(","),a=t[0].match(/:(.*?);/)[1],n=atob(t[1]),r=n.length,o=new Uint8Array(r);for(;r--;)o[r]=n.charCodeAt(r);return new Blob([o],{type:a})},io=()=>{let{video:{thumbnails:{og_thumbnail_crop_dims:e}}}=(0,N.McE)(),{thumbnailData:{uploading:t,initiateSave:a,thumbnailLocal:n,ogDims:r}}=(0,ey.w)(),{width:i,height:l}=r??{width:0,height:0},s=e?.position_info??{position:{x:0,y:0},scale:1},[d,c]=(0,o.useState)(s.scale),[m,u]=(0,o.useState)(s.position),[p,g]=(0,o.useState)({height:0,width:0}),[h,E]=(0,o.useState)(!1),f=(0,o.useRef)(null),v=(0,o.useRef)(null),w=()=>{if(f.current){let{width:e,height:t}=f.current.getBoundingClientRect();g({width:e,height:t})}};(0,o.useEffect)(()=>(window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w)}),[]),ia({initiateSave:a,cropperRef:v,currentlyUploading:t,thumbnailLocalUrl:n,options:{full_width:i,full_height:l,position_info:{scale:d,position:m}}}),(0,o.useEffect)(()=>{if(e){let{position_info:{position:t,scale:a}}=e;u(t),c(a)}},[e]),(0,o.useEffect)(()=>{n&&w()},[n]);let b=n||t,y=n&&!t,T=!h&&y;return o.createElement("div",{ref:f,className:ep()(o7.window,b?o7.editing:"")},n?o.createElement(o0(),{position:m,ref:v,image:n,width:p?.width,height:p?.height,scale:d,style:{cursor:"move"},onMouseMove:()=>{h||E(!0)},onMouseUp:()=>{E(!1)},onPositionChange:u,border:0}):null,T?o.createElement("img",{alt:"drag to reposition",width:"175px",height:"42px",src:o2,className:o7.drag}):null,t?o.createElement("div",{className:o7.loadingSpinner},o.createElement(M.aHM,{size:"large"})):null,y?o.createElement(o.Fragment,null,o.createElement(ii,{height:p.height,width:p.width}),o.createElement(M.mcf,{position:"absolute",bottom:"12px",width:"168px",height:"large",paddingRight:"10px",paddingLeft:"10px",backgroundColor:"backdrop",radius:"medium",className:"flex flexDirection:row justify:center items:center",style:{left:"calc(50% - 84px)"}},o.createElement(M.Int,{altText:"zoom out",className:o7.pointerCursor,onClick:()=>{c(e=>Math.max(e-.1,1))},size:2.5,color:"white",icon:o.createElement(o4.L,null)}),o.createElement(o9,{maxZoom:4,minZoom:1,scale:d,setScale:c}),o.createElement(M.Int,{altText:"zoom in",size:2.5,className:o7.pointerCursor,onClick:()=>{c(e=>Math.min(e+.1,4))},color:"white",icon:o.createElement(o1.e,null)}))):null)},ii=({height:e,width:t})=>{let a=e=>`${e}px`,n=a(t),r=a(e);return o.createElement(M.mcf,{position:"absolute",top:0,left:0,width:n,height:r,className:"flex",style:{opacity:.4,pointerEvents:"none"}},o.createElement(M.mcf,{className:o7.dashedBorder,position:"absolute",top:a(e/3),width:n,height:0}),o.createElement(M.mcf,{className:o7.dashedBorder,position:"absolute",top:a(2*e/3),width:n,height:0}),o.createElement(M.mcf,{className:ep()(o7.dashedBorder,o7.horizontal),position:"absolute",left:a(t/3),height:r,width:0}),o.createElement(M.mcf,{className:ep()(o7.dashedBorder,o7.horizontal),position:"absolute",left:a(2*t/3),height:r,width:0}))};var il=((n=il||{}).copyAndShare="copyAndShare",n.recordAnotherLoom="recordAnotherLoom",n);let is={stepAnimation:"progress-bar_stepAnimation_R1V",tutorialComplete:"progress-bar_tutorialComplete_bpA"},id=({tutorialComplete:e})=>o.createElement(M.mcf,{backgroundColor:"grey6",height:"6px",overflow:"hidden",position:"relative",radius:"full",width:"212px",zIndex:1},o.createElement("div",{className:ep()(is.stepAnimation,e&&is.tutorialComplete)}),o.createElement("svg",{width:"212",height:"6",viewBox:"0 0 212 6",xmlns:"http://www.w3.org/2000/svg",className:"absolute"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M212 0H0V3.00175V6H2.8967C1.28768 5.94555 0 4.62403 0 3.00175C0 1.34489 1.34315 0.00174546 3 0.00174546H29C30.6569 0.00174546 32 1.34489 32 3.00175C32 4.62403 30.7123 5.94555 29.1033 6H38.8967C37.2877 5.94555 36 4.62403 36 3.00175C36 1.34489 37.3431 0.00174546 39 0.00174546H65C66.6569 0.00174546 68 1.34489 68 3.00175C68 4.62403 66.7123 5.94555 65.1033 6H74.8967C73.2877 5.94555 72 4.62403 72 3.00175C72 1.34489 73.3431 0.00174546 75 0.00174546H101C102.657 0.00174546 104 1.34489 104 3.00175C104 4.62403 102.712 5.94555 101.103 6H110.897C109.288 5.94555 108 4.62403 108 3.00175C108 1.34489 109.343 0.00174546 111 0.00174546H137C138.657 0.00174546 140 1.34489 140 3.00175C140 4.62403 138.712 5.94555 137.103 6H146.897C145.288 5.94555 144 4.62403 144 3.00175C144 1.34489 145.343 0.00174546 147 0.00174546H173C174.657 0.00174546 176 1.34489 176 3.00175C176 4.62403 174.712 5.94555 173.103 6H182.897C181.288 5.94555 180 4.62403 180 3.00175C180 1.34489 181.343 0.00174546 183 0.00174546H209C210.657 0.00174546 212 1.34489 212 3.00175C212 4.62403 210.712 5.94555 209.103 6H212V3.00175V0Z",fill:"#2B1C50"}))),ic={tutorialWrapper:"card_tutorialWrapper_tAH",orangeBlur:"card_orangeBlur_Zfu",pinkBlur:"card_pinkBlur_MtL",purpleBlur:"card_purpleBlur_Lws"},im=({heading:e,subheading:t,cta:a,closeTutorial:n,tutorialStep:r,tutorialComplete:i})=>((0,o.useEffect)(()=>{void 0!==r&&eV.u4(B.xzf,{tutorialStep:r})},[r]),o.createElement("div",{className:ic.tutorialWrapper},i&&o.createElement(o.Fragment,null,o.createElement("span",{className:ic.purpleBlur}),o.createElement("span",{className:ic.pinkBlur}),o.createElement("span",{className:ic.orangeBlur})),o.createElement(M.mcf,{"data-lens-theme":"dark",width:"38.25rem",height:"18.625rem",padding:7},o.createElement(id,{tutorialComplete:i}),o.createElement(M.mcf,{position:"relative",zIndex:2},o.createElement(M.hKd,{y:"large"},o.createElement(M.EYj,{fontWeight:"bold",size:"heading-md",color:"body"},e)),o.createElement(M.EYj,{size:"body-lg",color:"body"},t),o.createElement(M.hKd,{top:"xlarge"}),o.createElement(M.zAb,{gap:"xlarge"},a&&o.createElement(M.mcf,{backgroundColor:"white",radius:"full","data-lens-theme":"light"},a),n&&o.createElement(M.QWc,{onClick:n,offsetSide:"left"},"Close tutorial")))))),iu=()=>{let[e,t]=(0,o.useState)(!0),[a,n]=(0,ek.A)(eP.WV),r=()=>{t(!1),n(!1)},i="",l="",s,d;return a?(i="Copy the link to share",l="Fun factwhen you finish the recording, the link is auto-copied.",d=il.copyAndShare):(i="Hey there, new Loom pro ",l="First Loom, done. Youre now ready to make your own.",s=o.createElement(aW.RecordButton,{source:"Extension tutorial complete record another Loom clicked",priorityList:[aH.nL]},o.createElement(M.$nd,{onClick:r},"Record another Loom video")),d=!1===a?il.recordAnotherLoom:void 0),(0,o.useEffect)(()=>{n(!0)},[]),e?o.createElement(o.Fragment,null,a?o.createElement(M.mcf,{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(75, 66, 173, .8)",zIndex:2}):null,o.createElement(im,{heading:i,subheading:l,cta:s,closeTutorial:()=>{eV.u4(B.DnX,{tutorialStep:d}),r()},tutorialStep:d,tutorialComplete:!a})):null};var ip=a(5799),ig=a(7543);let{SignedOutEndOfVideoNudges:ih,SignedOutEndOfVideoNudgesEmojiReactions:iE,AnonWebPlayerPauseModal:iv}=eI.Lm,iw=({shouldOpenInsights:e,fromRecorderParam:t,openSharePermissionsParam:a})=>{let{openModal:n}=(0,V.U)(),{setVideo:r,video:{id:i="",owner:l}={}}=(0,N.McE)(),{toggleIsViewerSelected:s}=(0,ta.k)(),{setShowConfirmationToast:d}=(0,nL.U)(),c=(0,N.FQu)(i),m=(0,_.useIsCurrentUserLoggedIn)(),u=(0,_.useCurrentUserSelector)(e=>e.persona?.persona_v1?.complete,!1),p=(0,H.lo)({flag:b.Rv.EXP_SHARE_PAGE_COPY_LINK_TEXT,controlType:b.mD.STATSIG_EXPERIMENT,activationValues:["variant"]}),g=(0,eO.SM)("replyVideoId"),h=(0,eO.sF)("t"),E=(0,eO.sF)("videoCurrentTime"),[f,v]=o.useState(!1);o.useEffect(()=>{if(c){if(g&&E){let e=Number(E);Number.isNaN(e)||(c.currentTime=Number(E));return}if(h){let e=Number(h);Number.isNaN(e)||(c.currentTime=Number(h))}}},[g,c,h,E]),o.useEffect(()=>{if((g&&!u||nB.Cu&&(0,eO.sF)("anon-reply-creator"))&&n({modalType:P.i$}),(0,eO.SM)("resume-signup")&&n({modalType:P.bY.ANON_CREATOR_SIGNUP_MODAL}),(0,eO.SM)("resume-anon-signup")&&!u&&m&&n({modalType:(0,aR.Ge)()}),nB.Cu&&(0,eO.SM)("hardgate_comment")){let e=(0,eO.sF)("hardgate_comment");n({modalType:P.bY.HARD_GATE_COMMENT_EMOJI_MODAL,options:{interactionType:ig.X.Comment,comment:e}})}if(nB.Cu&&(0,eO.SM)("hardgate_view")&&n({modalType:P.bY.HARD_GATE_VIEWS_MODAL,options:{videoOwnerName:"",source:eI.Lm.SignedOutHardGatingViews,signupParams:{signup_source:eI.Lm.SignedOutHardGatingViews},gate:eI.JH.HARD_GATE_VIEWS}}),(0,eO.SM)("start-embed-anon-signup")&&!m){let e=`Sign up to tell ${l?.displayName||"your teammate"} you watched this!`;n({modalType:(0,aR.Ge)(),options:{header:e,subheader:"Share ideas. Skip meetings.",hideModeSwitcher:!0,source:iv}})}if((0,eO.SM)("asg_comment")&&(0,eO.SM)("comment")&&!m){let e=(0,eO.sF)("comment"),t=(0,eO.sF)("video_time_stamp"),a=(0,eO.sF)("anon_name");n({modalType:(0,aR.Ge)(),options:{gate:eI.JH.REACTION,comment:e,commentVideoId:i,anonName:a,videoId:i,header:"Add your name to this comment",subheader:"Sign up and cut down on live meetings.",tertiaryButtonText:"Post comment anonymously",tertiaryButtonIcon:aR.fN.Comment,hideModeSwitcher:!0,source:ih,signupParams:{anonComment:e,anonCommentVideoId:i,anonCommentTimestamp:t,onboardingType:"modal-onboarding",signup_source:ih}}})}if((0,eO.SM)("asg_reaction")&&(0,eO.SM)("reaction")&&!m){let e=(0,eO.sF)("reaction"),t=(0,eO.sF)("video_time_stamp");n({modalType:(0,aR.Ge)(),options:{gate:eI.JH.REACTION,emojiReaction:e,emojiReactVideoId:i,header:"Add your name to this reaction",subheader:"Sign up and cut down on live meetings.",tertiaryButtonText:"Post reaction anonymously",tertiaryButtonIcon:aR.fN.React,hideModeSwitcher:!0,source:iE,onboardingType:"modal-onboarding",signupParams:{anonReaction:e,anonReactionVideoId:i,anonReactionTimestamp:t,onboardingType:"modal-onboarding",signup_source:iE}}})}e&&s()},[t,g,m,n,l?.displayName,e,i,u,s]),o.useEffect(()=>{if(a&&!f){v(!0);let e=(0,eO.sF)("requester_email");n({modalType:P.DN,options:{source:nx.C.ShareButton,videoId:i,setVideo:r,...e&&{prefilledEmail:e}}})}},[f,n,a,r,i]),o.useEffect(()=>{if(t&&null!=p){let e=p?"Link copied! You can now share it":"Link copied to clipboard!";ip.Dk(`${W.J4}/share/${i}`)&&d(e)}},[t,i,d,p])};var ib=a(41734);let iy=(0,eC.A)(()=>Promise.all([a.e("9999"),a.e("4301")]).then(a.bind(a,508)).then(e=>({default:e.VideoMetadata}))),iT=()=>o.createElement(o.Suspense,{fallback:null},o.createElement(iy,null)),iI=(0,eC.A)(()=>a.e("3369").then(a.bind(a,94419)).then(e=>({default:e.VideoMetadataMobile}))),iC=e=>o.createElement(o.Suspense,{fallback:null},o.createElement(iI,{...e})),i_=e=>{let{featureLoadedRef:t}=(0,e0.b)();return(0,f.Km)()?null:o.createElement("div",{ref:t,className:"metadataContainer"},o.createElement(M.zAb,{gap:"medium",autoFlow:"column",alignItems:"start",justifyContent:"stretch",columns:["100%"]},o.createElement(ej.z,{query:`(max-width: ${eJ.PO}px)`},o.createElement(iC,{anonCreatorMode:e.anonCreatorMode,focusTitle:e.focusTitle})),o.createElement(ej.z,{query:`(min-width: ${eJ.pF}px)`},o.createElement(iT,null))))},iS=e=>o.createElement(eZ.i,{feature:d.Xj.VideoMetadata,errorType:eQ.Y.SILENT},o.createElement(i_,{...e})),ik=()=>{let{video:{complete:e}}=(0,N.McE)(),{fetchShareVideoDownloadUrl:t}=(0,nV.N)();return o.useEffect(()=>{e&&t()},[e,t]),null};var iA=a(66059),iP=a(93778);let iL=e=>{let t=(0,_.useIsCurrentUserLoggedIn)(),a=(0,_.useCurrentUserSelector)(e=>e.id,null),{value:n,loading:r}=(0,r9.S)(aG.qp.RETENTION_VIDEOS_SERVED);return(0,o.useEffect)(()=>{if(!r&&t&&n&&a){let t=(Array.isArray(n)?n:[]).find(t=>t.id===e);t&&eV.u4(B.Cpq,{...(0,aL.x)(B.Cpq,y.T.video(e,"video_id"),y.T.user(a,"user_id")),videoSourceType:t.sourceType})}},[r,t,n,e,a]),{loading:r,wasRetentionVideo:!1}};var iR=a(26792);let iD=e=>{(0,iR.eb)("videoDetails",e)},ix=(e,t)=>{let[a,n]=o.useState(!1),{id:r,title:i,videoProperties:l}=e,{width:s,height:d,playableDuration:c}=l||{};(0,o.useEffect)(()=>{t&&!a&&r&&i&&l&&c&&s&&d&&(iD({id:r,title:i,duration:c,dimensions:{width:s,height:d},tabUuid:t}),n(!0))},[r,t,i,l,c,s,d,a,n])};var iN=a(62341),iM=a(25858),iV=a(70106);let iO=a.p+"img/zoom-to-click-share-page-ftux-e9c898c43a4670dd.png";var i$=a(84597),iF=a(2880);let iU={ftuxWrapper:"components_ftuxWrapper_Rfp",closeButton:"components_closeButton_kKv",ftuxImage:"components_ftuxImage_g6a"},iB=({videoId:e,ftuxName:t,imageSrc:a,imageAlt:n,title:r,description:i,ctaProps:l})=>{let s=(0,oB.AR)(),d=(0,o.useCallback)(()=>{s(t),(0,iF.vf)({videoId:e,ftuxName:t})},[s,t,e]);return(0,i$.J)(()=>{(0,iF.PD)({videoId:e,ftuxName:t})}),o.createElement(M.mcf,{"data-lens-theme":"light",radius:"200",padding:"medium",backgroundColor:"background",borderWidth:"1px",shadow:"medium",width:35},o.createElement("div",{className:iU.closeButton},o.createElement(M.K0,{altText:"close",onClick:d,icon:o.createElement(ee.h,null),size:"small",iconColor:"bodyDimmed"})),o.createElement(M.hKd,{top:2}),o.createElement(M.zAb,{gap:"medium",autoFlow:"row"},o.createElement("img",{src:a,alt:n,className:iU.ftuxImage}),o.createElement(M.mcf,null,o.createElement(M.EYj,{size:"body-md",fontWeight:"bold"},r),o.createElement(M.EYj,{size:"body-md"},i)),o.createElement(M.$nd,{htmlTag:"a",variant:"primary",href:l.href,onClick:d},l.text)))},iz=({videoId:e})=>{let t=`/edit/${e}?${c.uN}=1`;return o.createElement("div",{className:iU.ftuxWrapper},o.createElement(aX.P,{name:aG.qp.ZOOM_TO_CLICK_SHARE_PAGE_FTUX},o.createElement(iB,{videoId:e,ftuxName:aG.qp.ZOOM_TO_CLICK_SHARE_PAGE_FTUX,imageSrc:iO,imageAlt:"Zoom to click",title:"Automatic zooms added",description:"We automatically zoomed in on areas you clicked on while recording. You can remove some or all of these while editing.",ctaProps:{text:"Edit video",href:t}})))},iW=a.p+"img/cam-bubble-location-picker-share-page-ftux-44318796d8623ea5.png",iH=({videoId:e})=>{let t=`/edit/${e}?${c.L}=1`;return o.createElement("div",{className:iU.ftuxWrapper},o.createElement(aX.P,{name:aG.qp.CAM_BUBBLE_LOCATION_PICKER_SHARE_PAGE_FTUX},o.createElement(iB,{videoId:e,ftuxName:aG.qp.CAM_BUBBLE_LOCATION_PICKER_SHARE_PAGE_FTUX,imageSrc:iW,imageAlt:"Camera location picker",title:"Choose your camera position",description:"This is where your camera will appear in the final video. Camera movements made during recording arent saved.",ctaProps:{text:"Choose camera position",href:t}})))},iq={},iY=(0,er.J1)`
    query GetVideoSupportsCamPickerAndZooms($videoId: ID!, $password: String) {
  getVideo(id: $videoId, password: $password) {
    ... on RegularUserVideo {
      id
      supportsCameraBubbleRegion
      supportsEditZoomInstructions
      editZoomInstructions {
        id
      }
    }
  }
}
    `,iG=({data:e,isZoomToClickFtuxEnabled:t,isCamBubbleLocationPickerFtuxEnabled:a})=>{if(!e||e.getVideo?.__typename!=="RegularUserVideo")return{canShowCamBubbleLocationPickerFtux:!1,canShowZoomToClickFtux:!1};let n=a&&e.getVideo.supportsCameraBubbleRegion,r=!n&&t&&e.getVideo.supportsEditZoomInstructions&&e.getVideo.editZoomInstructions.length>0;return{canShowCamBubbleLocationPickerFtux:n,canShowZoomToClickFtux:r}},ij=()=>{let{video:{id:e}}=(0,iM.Mc)(),{password:t}=(0,x.l)(),a=(0,os.AF)(e),n=(0,f.Mh)(),r=(0,eD.TU)(),{isLoomZoomToClickEnabled:i}=(0,iN._)(),l=(0,iV.t)(),s=(0,oB.ih)(aG.qp.CAM_BUBBLE_LOCATION_PICKER_SHARE_PAGE_FTUX),d=(0,oB.ih)(aG.qp.ZOOM_TO_CLICK_SHARE_PAGE_FTUX),c=s&&l,m=d&&i,{data:u}=function(e){let t={...iq,...e};return eo.IT(iY,t)}({variables:{videoId:e,password:t},skip:a||!n||!r||!m&&!c}),{canShowCamBubbleLocationPickerFtux:p,canShowZoomToClickFtux:g}=iG({data:u,isZoomToClickFtuxEnabled:m,isCamBubbleLocationPickerFtuxEnabled:c});return o.createElement(o.Fragment,null,p?o.createElement(iH,{videoId:e}):null,g?o.createElement(iz,{videoId:e}):null)};var iJ=a(40179);let iX=({isOpen:e,onClick:t,onClose:a})=>Q.Fr?o.createElement(M.y8,{isOpen:e,onCloseClick:a,duration:"long",platform:"chrome-extension"},o.createElement(M.zAb,{alignItems:"start",gap:"small"},o.createElement(M.Int,{icon:o.createElement(iJ.B,null),color:"bodyInverse"}),o.createElement(M.EYj,{fontWeight:"bold",style:{cursor:"pointer"},onClick:t},"Enter Full Screen"))):null;var iK=a(38230),iZ=a(79412),iQ=((r=iQ||{}).DISPLAY="display",r.SKIPPED="skipped",r.DISMISSED="dismissed",r),i0=a(30581),i1=a(7170);function i4(){let[e,t]=(0,o.useState)(!1),[a,n]=(0,o.useState)(!1),r=(0,eO.jL)(window.location.pathname)[0],i=(0,H.lo)({flag:b.Rv.EXP_ROLLOUT_FEDCM_FOR_ONE_TAP,controlType:b.mD.STATSIG_EXPERIMENT,activationValues:[!0]});return(0,o.useEffect)(()=>{void 0!==i&&(window?.google?.accounts?.id?.initialize?.({client_id:iZ.Xg,use_fedcm_for_prompt:i,callback(e){if(e?.credential){let t={id_token:e.credential,authURL:window.location.href,redirect_after:window.location.href,fromWebSignup:!0};i0.u3(iK.OW,t)}i1.Ys("google_one_tap.accepted",{source:r})}}),n(!0))},[r,e,a,i]),(0,o.useLayoutEffect)(()=>{!e&&a&&(window?.google?.accounts?.id?.prompt(e=>{if(e.isDisplayed())i1.Ys("google_one_tap.displayed",{source:r});else switch(e.getMomentType()){case iQ.DISPLAY:i1.Ys("google_one_tap.not_displayed",{reason:e.getNotDisplayedReason(),source:r});break;case iQ.SKIPPED:i1.Ys("google_one_tap.skipped",{reason:e.getSkippedReason(),source:r});break;case iQ.DISMISSED:i1.Ys("google_one_tap.dismissed",{reason:e.getDismissedReason(),source:r})}}),t(!0))},[e,a,r,t]),null}let i2=()=>{let{featureLoadedRef:e}=(0,e0.b)();return o.createElement("div",{ref:e},o.createElement(i4,null))},i3=()=>o.createElement(eZ.i,{feature:d.Xj.GoogleOneTap,errorType:eQ.Y.SILENT},o.createElement(i2,null)),i5=()=>{(0,eR.M)()};var i6=a(39330);let i8=e=>{let[t,a]=(0,o.useState)(!1),[n,r]=(0,o.useState)(!1),i=(0,o.useRef)(null),l=(0,o.useRef)(!1),s=(0,N.FQu)(e),d=rE(),c=(0,o.useCallback)(async()=>{if(s)try{await s.toggleFullscreen(),a(!1)}catch(e){eK.warning(e,{message:"Failed to toggle fullscreen"}),a(!1)}},[s]),m=(0,o.useCallback)(()=>{a(!1)},[]);return(0,o.useEffect)(()=>{if(null===i.current){i.current=d;return}!1===i.current&&d&&!s?.isInFullScreen()&&(l.current?a(!0):r(!0)),i.current=d},[d,s]),(0,o.useEffect)(()=>{if(!s)return;let e=()=>{l.current=!0,n&&d&&!s.isInFullScreen()&&(a(!0),r(!1))};return s.on([i6.f$.userPlay],e),()=>{s.off([i6.f$.userPlay],e)}},[s,n,d]),{isToastOpen:t,onToastClick:c,onToastClose:m,shouldShowToastOnPlay:n}},i9=(0,eC.A)(()=>Promise.resolve().then(a.bind(a,90654)).then(e=>({default:e.RecordButton}))),i7=({children:e,focusTitle:t,fromRecorderParam:a,fromTutorialParam:n,recordingLimitParam:r,cascadingRecordersTabUuidParam:i,recordingDocumentationTypeParam:l})=>{let{video:s}=(0,N.McE)(),{description:c,modelId:m,organizationId:u}=s,{isInTheaterMode:p}=(0,L._)(),{isInThumbnailFlow:g}=((0,eD.P$)(),(0,ey.w)()),{hasCustomLogo:h,shouldShowLoomBranding:v}=(0,S.O)({videoId:m}),w=(0,q.d)(m),b=(0,_.useIsCurrentUserLoggedIn)(),y=(0,_.useCurrentUserSelector)(e=>!!(e.accountType&&eg.includes(e.accountType)),!1),T=(0,to.s1)(eE.F4),I=!b||!T||!y,C=(0,to.s1)(eE.HV),k=(0,aQ.T)({videoId:m}),{setCurrentRightPanelTab:P}=(0,iP.g)(),{hasCreateTabEditorExperience:R,hasCreateTabViewerExperience:D}=(0,f.ZE)(),x=R||D,V=new URLSearchParams(window.location.search).has("tab"),[O,$]=(0,o.useState)(!0),{setActiveWorkflowType:F,setActiveArtifactType:U,setActiveIssuePlatform:B,setCreateTabCurrentScreen:z,activeIssuePlatform:W}=(0,aO.K)(),{data:H}=(0,iA.tw)({variables:{name:E.zjL.RecordingDocumentationType,videoId:m},skip:!m||!b||!x||V,fetchPolicy:"cache-first"}),Y=H?.getVideoProperty?.__typename==="VideoProperty"&&H.getVideoProperty.value===E.m$q.BugReport,G=l===E.m$q.BugReport,j=Y||G,{data:J}=(0,aB.C4)({variables:{videoId:m},fetchPolicy:"network-only",skip:!m||!j}),X=J?.generatedIssue?.__typename==="GeneratedIssuePayload";rs(m,k),iL(m),(0,o.useEffect)(()=>{!V&&x&&!X&&O&&j&&(P(f.hu.Create),F("ticket"),B(W),U("jira"===W?aV.FR.Jira:aV.FR.Linear),z(E.m$q.BugReport),$(!1))},[j,x,V,W,X,O,$,P,F,U,B,z]);let{errorBar:{showing:K}}=(0,A.Nl)();i5(),ix(s,i);let Z=(0,o.useRef)(null),ee=(0,o.useRef)(null),et=(0,o.useRef)(null),ea=(0,ib.c)();(0,o.useEffect)(()=>{Z.current?.style?.setProperty("--aspectRatio",String(ea))},[ea]),(0,o.useEffect)(()=>{g&&(window.scrollTo({top:0,behavior:"smooth"}),ee.current?.scrollTo({top:0,behavior:"smooth"}))},[g]);let en=(0,eD.Te)(),er=!(0,f.Km)()&&!n,eo=ep()("sharePageWrapper",{"current-user-is-owner":k,"error-bar-shown":K,theaterMode:p,hideSideNav:en,hasDescription:!!c,hideBlackBarsInVideo:en}),ei=!b&&!Q.Fr,el=(0,az.MH)()===az.gN.GET_STARTED_CHECKLIST_CALLOUT,es=v&&h,ed=en&&!el&&!es&&!Q.Fr,ec=(0,_.useIsCurrentUserLoggedIn)(),em=!!(0,_.useCurrentUserSelector)(e=>e.persona?.persona_v1?.use_case_plan_persona,null),eu=(0,rn.U)();(0,rr.u)(eu,ec,em);let{isToastOpen:eh,onToastClick:ef,onToastClose:ev}=i8(m);return aU({recordingDocumentationType:l}),o.createElement(oK,{useAnonymousNavigation:I,videoId:m},o.createElement(aM.S,null),o.createElement(iX,{isOpen:eh,onClick:ef,onClose:ev}),o.createElement("div",{ref:Z,className:eo},b&&C?o.createElement(rY,{organizationId:u}):null,o.createElement("div",{className:"sharePageContainer"},o.createElement("div",{ref:ee,id:"videoAndMetadataWrapper",className:"videoAndMetadataWrapper"},en?o.createElement(aN,{videoId:s.id}):null,o.createElement("div",{className:"videoContainer"},o.createElement(a2,null),e,Q.Fr?null:o.createElement(rM,null),ed?o.createElement(ew.AT,{feature:d.Xj.SDKRecorder},o.createElement(o.Suspense,{fallback:null},o.createElement(M.mcf,{position:"fixed",left:"xlarge",bottom:"large",zIndex:1},o.createElement(i9,{priorityList:b?[aH.nL,aH.Vp,aH.hp]:[aH.hp],location:aW.SHARE_PAGE},o.createElement(aq.X,{isCollapsed:!0,hideSideNav:!0,isOnSharePage:!0}))))):null),o.createElement(iS,{anonCreatorMode:w,focusTitle:t,fromRecorderParam:a}),Q.Fr?o.createElement(rM,null):null),er?o.createElement(oZ.tY,{useDefaultWidth:g,ref:et}):null,k?o.createElement(oj,null):null,o.createElement(_.LoggedInOnly,null,o.createElement(eb.O,{inVideoWrapper:!0,rightPanelRef:et})))),o.createElement("div",{id:"gmail-integration-share-page-placeholder"}),es?o.createElement(rX,null):null,o.createElement(rD,null),o.createElement(rt,{isLoggedIn:b,fromRecorderParam:a,fromTutorialParam:n}),o.createElement(oP,{fromRecorderParam:a,recordingLimitParam:r}),ei&&!nB.YG?o.createElement(i3,null):null)},le=e=>{let{isInThumbnailFlow:t}=(0,ey.w)(),{video:a}=(0,N.McE)(),{needsPassword:n}=(0,x.l)(),r=(0,ev.u)(),{currentUserCanEdit:i}=a,{sendScreenEvent:l}=(0,ef.s)(),{data:s}=(0,rd.dW)({variables:{id:a.id}});(0,o.useEffect)(()=>{if(s?.getVideo){let t=a.emailGateVideoType===eh.z.Hard||a.emailGateVideoType===eh.z.Soft;l({name:"loomVideoShare",attributes:{isMeetingRecording:e.isMeetingRecording,hasAccess:!a.noAccess,isPasswordProtected:n,isEmailGateActive:t}})}},[s?.getVideo,e.isMeetingRecording,l,n,a]),iw({shouldOpenInsights:e.shouldOpenInsights,fromRecorderParam:e.fromRecorderParam,openSharePermissionsParam:e.openSharePermissionsParam}),(0,ro.do)(a.id);let d=(0,aQ.T)({videoId:a.id}),c=e.fromTutorialParam&&e.fromRecorderParam&&d;return o.createElement(i7,{focusTitle:e.focusTitle,fromRecorderParam:e.fromRecorderParam,fromTutorialParam:e.fromTutorialParam,recordingLimitParam:e.recordingLimitParam,userCanEdit:i,recordingDocumentationTypeParam:e.recordingDocumentationTypeParam},c?o.createElement(iu,null):null,o.createElement(ra.oQ,null,o.createElement(rm,{fromRecorderParam:e.fromRecorderParam,isFromTutorial:e.fromTutorialParam}),o.createElement(rx,null),o.createElement(ik,null),r?.isEditingCta&&d?o.createElement(a5,null):null,t?o.createElement(io,null):null,i?o.createElement(ij,null):null," "))};var lt=a(97986),la=a(18178);let ln=({data:e,focusTitleParam:t,mutedParam:a,timeParam:n,shouldOpenInsights:r,fromRecorderParam:i,fromTutorialParam:l,recordingLimitParam:s,activeTabParam:c,oauthError:u,anonEmailParam:p,openSharePermissionsParam:g,cascadingRecordersTabUuidParam:h,recordingDocumentationTypeParam:E})=>{let{showErrorBar:M}=(0,A.Nl)(),[V,K]=(0,o.useState)(!1),{initPasswordStore:Z}=(0,x.l)(),{setCurrentRightPanelTab:Q}=(0,iP.g)(),ee=(0,m.bZ)(window.location.href),et=(0,_.useIsCurrentUserLoggedIn)(),{setAnonUserName:ea}=(0,R.c)(),{setIsInTheaterMode:en,isInTheaterMode:er}=(0,L._)(),{setExpandRightPanel:eo}=(0,la.z)(),{videoModel:ei,loading:el}=(0,f.eQ)({videoId:ee}),{injectCustomBrandColors:es}=(0,S.O)({videoId:ee}),ed=(0,q.d)(ee),ec=(0,Y.r)(),{setFromRecorder:eu}=(0,D.Y)(),ep=(0,H.Rw)(b.Y0.LOOM_LOVABILITY_SURVEY,b.mD.STATSIG_FEATURE_GATE)??!1;(0,o.useLayoutEffect)(()=>{el||ei||V||(window.location.href=W.p2)},[V,el,ei]),(0,o.useLayoutEffect)(()=>{el||!ei||V||(u&&M({message:decodeURIComponent(u),severity:U.M.ERROR}),Z({isProtected:ei.is_protected,needsPassword:ei.needs_password}),ec(),(0,e$.Sw)(ei.name),eu(i),c&&Q(c),eo(i),es(),!i&&er&&en(!0),K(!0))},[c,i,Z,es,V,ec,el,u,M,ei,en,er,Q,eu,eo]),(0,o.useEffect)(()=>{if(!el&&p&&!et){ea(p);let e=ei?ei.id:null;eV.u4(B.CPK,(0,aL.x)(B.CPK,y.T.video(e,"videoId")))}},[p,et,el,ei,ea]),(0,o.useEffect)(()=>{let e=document.referrer,t=v.i[v.B.smartChip].includes(e),a=v.i[v.B.googleChat].includes(e);(t||a)&&(0,i1.Ys)(z.EP,{type:t?v.i[v.B.smartChip]:v.i[v.B.googleChat]})},[]);let eg=(0,F.ur)();if(el||!ei||!V)return null;let eh=ei.current_user_is_owner,eE={...eg,uid:ei.id};return o.createElement(N.Y00,{video:(0,F.L)(ei),userContext:eE},o.createElement(I.q,{pageName:C.E.SHARE},o.createElement(lt.Q,null,o.createElement(f.Z7,{isReady:V}),o.createElement(T.AnalyticsTrackPageWrapper,{pageName:d.YW.IndividualVideo,props:{is_owner:eh,fresh:!0,isCommunityLoom:ei.isCommunityLoom,videoId:ee}},o.createElement(k.i,{pageName:d.YW.IndividualVideo,props:{videoId:ee}},o.createElement(j.t7,null,o.createElement(X.i,null,ed&&o.createElement(O,null),o.createElement(em,null),o.createElement($.Provider,{value:e[w.Fd]},o.createElement(J.ae.Provider,{value:e[w.A7]},o.createElement(J.TN,null,o.createElement(le,{focusTitle:t,mutedParam:a,timeParam:n,shouldOpenInsights:r,fromRecorderParam:i,fromTutorialParam:l,cascadingRecordersTabUuidParam:h,recordingLimitParam:s,openSharePermissionsParam:g,isMeetingRecording:ei.isMeetingRecording,recordingDocumentationTypeParam:E})))),o.createElement(P.Bs,null)))))),ep&&o.createElement(G.D,null)))};var lr=a(67200),lo=a.n(lr);let li=()=>{window.loomResetFtux=async e=>{let t=(0,ti.Xc)();try{return await t.mutate({mutation:lo(),variables:{name:e,value:!1}}),`FTUX "${e}" reset! You should refresh the page now.`}catch(t){return`Error resetting FTUX "${e}": ${t}`}}};var ll=a(82843),ls=a(88227),ld=a(40804),lc=a(81400),lm=a(23382);let{reactor:lu}=s.bs,lp="1"===(0,eO.sF)(c.qc),lg="1"===(0,eO.sF)(c.Yk),lh=["exp-anon-vfv-variant-2-first-video-view-updated","loom-video-first-view-updated"].includes((0,eO.sF)(c.Rq)),lE=(0,ld.p)(lu),lf=""!==lE,lv="1"===(0,eO.sF)(c.y9),lw="1"===(0,eO.sF)(c.Mm),lb=(0,eO.sF)(c.wu),ly=(0,i.A)(lb)?lb:"",lT="1"===(0,eO.sF)(c.Uu),lI=(0,eO.sF)(c.rl),lC="1"===(0,eO.sF)(c.uu),l_=(0,eO.sF)(c.UQ),lS=(0,eO.sF)(c.Ti),lk=(0,eO.sF)(c.T)?(0,lm.ob)(atob((0,eO.sF)(c.T)),{}):{},lA=(0,eO.sF)(c.cU),lP=(0,eO.sF)(c.qe),lL=lP&&Object.values(E.m$q).includes(lP)?lP:void 0;try{!function(){ls.L.onReady(()=>{ls.L.startView("/share/:videoId")});try{(0,lc.dy)()}catch{}let{pathname:e,search:t}=window.location,a=(0,eO.S_)([c.rl,c.qc,c.Yk,c.Rq,c.y9,c.Uu,c.Ti,c.Qm,c.qH,c.T,c.Mm,c.cU,c.uu,c.wu,c.qe],t);window.history.replaceState("","",`${e}${a}`),lk&&lk?.referrer==="push"&&(0,ll.mr)(lk),li(),(0,p.renderLoomPage)(o.createElement(l.A,{name:"share-video"},o.createElement(u.Z,null,o.createElement(h.c,{feature:d.Xj.SharePage,pageName:d.YW.Share},o.createElement(g.Q,null,o.createElement(ln,{data:lk,focusTitleParam:lp,mutedParam:lg,timeParam:l_,shouldOpenInsights:lh||lf,fromRecorderParam:lv,fromTutorialParam:lw,recordingLimitParam:lT,activeTabParam:lI,oauthError:lS,anonEmailParam:lA,openSharePermissionsParam:lC,cascadingRecordersTabUuidParam:ly,recordingDocumentationTypeParam:lL}))))),{enableTtvc:!0,sharding:{entityType:"video",entityId:(0,m.bZ)(window.location.href)}})}()}catch(e){["SecurityError"].includes(e.name)||eK.error(e,{message:"[Fresh Page] Errored",hasVideo:!0},{feature:d.Xj.SharePage})}},82843:function(e,t,a){a.d(t,{$y:()=>u,GT:()=>m,_h:()=>E,fF:()=>g,mr:()=>f,uY:()=>h});var n=a(15037),r=a(49259),o=a(84306),i=a(79412),l=a(22318),s=a(28353),d=a(83355),c=a(80254);let m=async()=>s.BI?(await navigator.serviceWorker.register("/sw.js",{scope:"/"}),Promise.resolve(!0)):Promise.resolve(!1),u=async()=>{let e=await navigator.serviceWorker.ready,t={userVisibleOnly:!0,applicationServerKey:p(i.X0)},a=null;try{a=await e.pushManager.subscribe(t)}catch(r){if(r.name===n.rX)await (await e.pushManager.getSubscription())?.unsubscribe(),a=await e.pushManager.subscribe(t);else throw r}return a},p=e=>{let t="=".repeat((4-e.length%4)%4),a=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(a),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r[e]=n.charCodeAt(e);return r},g=()=>new Promise((e,t)=>{let a=Notification.requestPermission(t=>{e(t)});a&&a.then&&a.then(e).catch(t)}).then(e=>e),h=()=>window.Notification?navigator.permissions?navigator.permissions.query({name:"notifications"}).then(e=>e.state):new Promise(e=>{e(Notification.permission)}):Promise.resolve(n.OI),E=async()=>{s.BI&&(await navigator.serviceWorker.getRegistrations()).forEach(e=>{e.scope!==`${o.J4}/`&&e.unregister()})},f=e=>{l.u4(e.event,{...e,...(0,c.x)("processPushEventData",r.T.notification(e.notif_id,"string","notif_id"))}),e.notif_id&&(0,d.h)(`/v1/notifications/${e.notif_id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n.Pz})})}},32836:function(e,t,a){a.d(t,{fd:()=>r,nx:()=>o,yL:()=>n});let n=e=>/\s/g.test(e),r=e=>`Copy of ${e}`;function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}},40804:function(e,t,a){let n;a.d(t,{p:()=>s});var r=a(29665),o=a(22318),i=a(23382);let l=()=>{if(n)return;n=Object.fromEntries(new URLSearchParams(location.search));let e=n?.data,t=e?(0,i.ob)(atob(e),{}):{};e&&o.u4(r.wAV,{notificationType:t?.event,url:t.url}),n={...n,...t}},s=e=>{n||l();let t=n[e];return t?String(t):""};l()}},function(e){var t=function(t){return e(e.s=t)};e.O(0,["1592","1762","2661","3092","3266","380","3847","4414","4837","546","6535","7292","7984","8555","875","8871","9253","9909"],function(){return t(41043),t(38412),t(1206)}),e.O()}]);
//# sourceMappingURL=https://cdn.loom.com/internal-public/webapp-sourcemaps/js/share-video-8ac03b5518bd8c74.js.map